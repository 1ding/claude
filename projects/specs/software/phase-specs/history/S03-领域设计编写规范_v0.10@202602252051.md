# 1 适用范围

+   文档编号：S03
+   文档名称：领域设计编写规范
+   适用对象：领域设计文档（《软件研发过程规范》阶段3"领域设计"的输出物，文档编号03-领域设计）
+   管辖范围：领域设计文档各章节的编写规则、内容要求、判断标准与内容模型
+   不管辖的范围：排版格式（见《C02-排版格式规范》）、内容表达通用规则（见《C01-内容表达规范》）

## 1.1 裁剪规则

+   领域设计文档各章节内容要点标注了三级强制性级别，各级别的裁剪条件如下表所示。

    | 标注   | 裁剪条件                                           |
    | ------ | -------------------------------------------------- |
    | (必选) | 不可裁剪；如确实不适用 → 保留标题 + 注明不适用原因 |
    | (宜)   | 可直接省略                                         |
    | (可选) | 可直接省略                                         |
    | 无标注 | 同(必选)，确有充分理由不适用时保留标题并注明原因   |

+   裁剪后仍应确保追溯链完整性（Business Epic → 子域 → BC → Enabler Epic 的链路不断裂）。

## 1.2 裁剪建议

+   不可裁剪的章节及理由：
    -   第4章 领域划分与子域分类：战略设计核心，BC识别的前置基础
    -   第5章 限界上下文识别与定义：领域设计的主体交付物，BC是后续所有阶段的基本组织单元
    -   第6章 上下文映射：BC间协作关系定义，阶段4系统设计的集成架构输入
    -   第9章 架构需求分析（Enabler Epic）：《N00-软件研发过程规范》明确要求领域设计文档包含"架构需求分析"章节

+   裁剪建议：

    | 项目规模 | 判断参考               | 裁剪策略                                                                                          |
    | -------- | ---------------------- | ------------------------------------------------------------------------------------------------- |
    | 标准项目 | BC >= 5，跨域交互 >= 3 | 完整执行全部章节                                                                                  |
    | 小型项目 | BC < 3，跨域交互 <= 1  | 第2章可简化（省略EventStorming等重方法）；第7章可合并入第6章；第8章可省略（留至阶段6 BC总体设计） |

    +   裁剪建议

# 2 正文章节结构

+   领域设计文档正文应包含9个章节，章节顺序固定，不应调整。
+   除正文外，文档应包含附录，附录编写规则见第3章。
+   2.1–2.9节分别定义各章节的编写规范，每节包含章节目的、章节结构（四列表）、内容模型（如有）三个层次。
+   章节结构表以四列定义：编号（对应目标文档的章节编号）、标题（对应目标文档的章节标题）、内容要点（该章节应包含的核心内容）、内容模型（指向本规范中定义的具体编写模型，无指向时留空）。内容要点采用三级强制性标注：(必选)/(宜)/(可选)，各级别裁剪条件见1.1节，未标注的默认为必选项。

## 2.1 第1章 概述

### 2.1.1 章节目的

+   概述是领域设计文档的导读章节，面向所有读者（领域专家、架构师、开发团队），使其快速了解文档目的、领域设计方法论框架和术语约定。领域设计文档是阶段3的唯一正式输出物，运用DDD方法完成从问题空间到解决方案空间的战略设计，核心目标是明确子域分类与优先级、划定BC边界、定义BC间协作关系，并识别 Enabler Epic。
+   本章不包含领域分析内容，不产生新的分析成果——所有分析从第2章开始。
+   本章方法论框架图和术语约定向后传递至第2~9章，作为全文分析的方法论基础和语言基准。

### 2.1.2 章节结构

+   第1章结构与内容要点如下表所示。

    | 编号 | 标题       | 内容要点                                                                                                                                                    | 内容模型 |
    | ---- | ---------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- |
    | 1.1  | 文档目的   | 本文档的编写目的和适用范围                                                                                                                                  |          |
    | 1.2  | 方法论框架 | 领域设计方法论框架图（涵盖"知识消化→统一语言→领域划分→BC识别→上下文映射→领域事件→领域模型概要→架构需求"完整逻辑链）、各环节职责概述、与上下游阶段的关系说明 |          |
    | 1.3  | 术语约定   | 通用术语引用索引（引用《软件开发术语规范》）                                                                                                                |          |
    |      |            | 本文档特有术语定义（DDD战略设计相关术语：子域、限界上下文、上下文映射、聚合等）                                                                             |          |
    | 1.4  | 编号约定   | 各类条目的编号体系说明（引用《P01-软件开发编号规范》）                                                                                                      |          |

    +   第1章结构与内容要点

## 2.2 第2章 业务知识消化

### 2.2.1 章节目的

+   本章是领域设计的起点，面向领域专家和架构师，回答"我们对业务的理解是否充分"——通过系统化的知识获取方法，将阶段2的三线分析成果和领域专家知识转化为领域设计的输入。
+   核心产出为知识获取计划、问题空间全景和知识消化总结。知识来源分为结构化输入（阶段2交付物）和非结构化输入（专家访谈、EventStorming工作坊等）。
+   本章问题空间全景向后传递至第4章，作为领域划分的输入；EventStorming产出的领域事件向后传递至第7章，作为事件识别的初始素材。
+   本章各子节按以下顺序推导：2.1清点输入→2.2验收成果→2.3补充知识获取→2.4形成全景。第一步逐项清点阶段2的结构化交付物确认可用输入；第二步对已到位的交付物逐项验收并识别完整性缺口；第三步针对缺口和非结构化知识需求制定补充获取计划；第四步综合全部输入形成问题空间全景，为第4章领域划分提供输入。

### 2.2.2 章节结构

+   第2章结构与内容要点如下表所示。

    | 编号 | 标题               | 内容要点                                                                                                          | 内容模型               |
    | ---- | ------------------ | ----------------------------------------------------------------------------------------------------------------- | ---------------------- |
    | 2.1  | 知识来源与获取策略 | 结构化输入清单（阶段2交付物逐项确认，每个独立交付物一行，应覆盖大纲视图"上游输入"全部条目）+ 非结构化输入获取计划 | 结构化输入清单表       |
    |      |                    |                                                                                                                   | 非结构化输入获取计划表 |
    | 2.2  | 阶段2成果承接      | 三线分析成果验收（活动线→PL1级、角色线→CL1级、实体线→核心实体级）、Business Epic 清单承接、业务域归类承接         | 成果承接验收表         |
    | 2.3  | 知识消化方法       | (宜) EventStorming 工作坊、领域故事讲述等知识消化方法与产出定义                                                   | 知识消化方法定义表     |
    | 2.4  | 问题空间全景       | 业务全景理解、核心业务问题识别（粒度对应子域级别，可映射到第4章子域）、问题空间边界确认（与阶段2产品范围一致）    | 核心问题清单表         |

    +   第2章结构与内容要点

+   补充说明：
    -   2.2节承接状态为"缺失"的条目，备注中记录假设编号（格式 `AS-{两位序号}`），标注"来源：阶段2输出缺失"。
    -   2.4节采用叙述段落 + 表格的混合结构：首段为业务全景概述（1~2段），之后为核心问题清单表。
    -   本章不进行领域划分或子域识别，领域划分从第4章开始。

### 2.2.3 内容模型

#### 结构化输入清单表

    | 列名     | 填写说明                                              |
    | -------- | ----------------------------------------------------- |
    | 输入编号 | 格式 `SI-{序号}`，序号两位，从 01 起                  |
    | 输入名称 | 阶段2交付物的具体名称                                 |
    | 来源章节 | 该交付物在宏观需求文档中的章节编号                    |
    | 承接状态 | `已确认` / `待确认` / `缺失`                          |
    | 备注     | 缺失项填写假设编号（AS-*），标注"来源：阶段2输出缺失" |

    +   结构化输入清单表列定义

#### 非结构化输入获取计划表

    | 列名     | 填写说明                                                 |
    | -------- | -------------------------------------------------------- |
    | 计划编号 | 格式 `KA-{序号}`，序号两位，从 01 起                     |
    | 获取方式 | 领域专家访谈 / EventStorming工作坊 / 现有系统分析 / 其他 |
    | 目标知识 | 期望获取的业务知识描述                                   |
    | 参与角色 | 参与该知识获取活动的角色清单                             |
    | 计划时间 | 预计执行时间                                             |
    | 产出物   | 该活动的预期交付物                                       |

    +   非结构化输入获取计划表列定义

#### 成果承接验收表

    | 列名     | 填写说明                                         |
    | -------- | ------------------------------------------------ |
    | 验收项   | 阶段2成果的具体条目名称                          |
    | 所属线   | 活动线 / 角色线 / 实体线 / Epic清单 / 业务域归类 |
    | 完整性   | `完整` / `部分完整` / `缺失`                     |
    | 差异说明 | 与预期不符时的具体差异描述                       |
    | 处理方式 | `直接使用` / `补充后使用` / `记录假设（AS-*）`   |

    +   成果承接验收表列定义

#### 知识消化方法定义表

    | 列名     | 填写说明                                   |
    | -------- | ------------------------------------------ |
    | 方法名称 | 如 EventStorming、领域故事讲述、领域走查等 |
    | 适用场景 | 该方法最适合解决什么类型的知识获取问题     |
    | 产出定义 | 该方法的标准产出物及格式要求               |
    | 裁剪标记 | `必须` / `推荐` / `可选`                   |

    +   知识消化方法定义表列定义

#### 核心问题清单表

    | 列名     | 填写说明                                        |
    | -------- | ----------------------------------------------- |
    | 问题编号 | 格式 `BP-{序号}`，序号两位，从 01 起            |
    | 问题描述 | 一句话描述该业务问题                            |
    | 影响范围 | 该问题涉及的业务域或流程范围                    |
    | 来源     | 问题识别的来源（阶段2成果 / 专家访谈 / 工作坊） |

    +   核心问题清单表列定义

## 2.3 第3章 统一语言

### 2.3.1 章节目的

+   本章建立领域设计的语言基础，面向全体项目成员（领域专家、架构师、开发者），回答"团队如何用一致的语言描述业务"——统一语言（Ubiquitous Language）确保同一概念在代码、文档和团队沟通中使用同一术语。
+   核心产出为领域术语表（含定义、子域/BC归属、阶段2术语映射）和术语治理规则。术语表是活文档，在第4~8章分析过程中持续补充。
+   本章术语定义和治理机制向后传递至第4~8章，作为全文术语使用的权威基准；术语映射关系向后传递至第5章，作为BC间术语一致性检查的依据。

### 2.3.2 章节结构

+   第3章结构与内容要点如下表所示。

    | 编号 | 标题             | 内容要点                                                                                              | 内容模型   |
    | ---- | ---------------- | ----------------------------------------------------------------------------------------------------- | ---------- |
    | 3.1  | 统一语言原则     | 统一语言的定义、适用范围和核心规则（同一术语全文唯一名称，别名仅在术语表记录）                        |            |
    | 3.2  | 领域术语表       | 术语定义模板（术语、英文PascalCase、定义（满足"可判断"标准）、所属子域/BC、阶段2术语映射、别名清单）  | 领域术语表 |
    | 3.3  | 术语治理规则     | 术语新增/变更/废弃流程、冲突解决机制、跨BC术语一致性检查规则                                          |            |
    | 3.4  | 与上游术语的衔接 | 阶段2术语到领域术语的映射表（覆盖业务域名称、流程节点名称、用户角色名称、核心实体名称）、术语分歧处理 | 术语映射表 |

    +   第3章结构与内容要点

+   补充说明：
    -   收录范围：DDD战略设计术语 + 本项目业务领域术语。不收录通用技术术语，通用技术术语引用《软件开发术语规范》。收录判断：被两处及以上引用，或含义偏离常见用法。
    -   术语表是活文档，在第4~8章分析过程中持续补充，本章建立初始版本。

### 2.3.3 内容模型

#### 领域术语表

    | 列名          | 填写说明                                      |
    | ------------- | --------------------------------------------- |
    | 术语          | 中文术语名称                                  |
    | 英文          | 对应英文术语（用于代码命名）                  |
    | 定义          | 一句话定义，应满足"可判断"标准                |
    | 所属子域      | 该术语归属的子域名称（第4章确定后回填）       |
    | 所属BC        | 该术语归属的BC名称（第5章确定后回填）         |
    | 阶段2术语映射 | 对应的阶段2术语名称，无对应填"-"              |
    | 别名          | 该术语的已知别名，多个用顿号分隔，无别名填"-" |
    | 状态          | `生效` / `废弃` / `待确认`                    |

    +   领域术语表列定义

+   领域术语表填写示例：

    | 术语       | 英文           | 定义                                                 | 所属子域 | 所属BC   | 阶段2术语映射 | 别名       | 状态 |
    | ---------- | -------------- | ---------------------------------------------------- | -------- | -------- | ------------- | ---------- | ---- |
    | 限界上下文 | BoundedContext | 统一语言术语具有唯一含义的模型边界，是自治的设计单元 | -        | -        | -             | BC         | 生效 |
    | 采购订单   | PurchaseOrder  | 采购方向供应商发起的采购请求，含至少一个行项目       | 采购域   | 采购管理 | 采购申请单    | PO、采购单 | 生效 |

    +   术语表填写示例

#### 术语映射表

    | 列名      | 填写说明                                                |
    | --------- | ------------------------------------------------------- |
    | 阶段2术语 | 阶段2宏观需求文档中使用的术语                           |
    | 领域术语  | 本文档中对应的领域术语                                  |
    | 映射关系  | `等同` / `包含` / `被包含` / `重命名` / `拆分` / `合并` |
    | 差异说明  | 映射关系非"等同"时，说明语义差异                        |

    +   术语映射表列定义

+   术语映射表填写示例：

    | 阶段2术语  | 领域术语 | 映射关系 | 差异说明                                       |
    | ---------- | -------- | -------- | ---------------------------------------------- |
    | 采购申请单 | 采购订单 | 重命名   | 领域建模中统一为"采购订单"，覆盖申请到下单全程 |
    | 库存管理   | 库存域   | 等同     | -                                              |

    +   术语映射表填写示例

## 2.4 第4章 领域划分与子域分类

### 2.4.1 章节目的

+   本章完成从问题空间到解决方案空间的第一步战略决策，面向架构师和产品负责人，回答"业务应如何分解为子域，各子域的战略地位如何"——从第2章的问题空间全景出发，识别子域并按核心域、支撑域、通用域分类，子域分类直接影响投资策略。
+   核心产出为子域清单（含分类、职责定义、投资策略）、子域与业务域映射关系、子域与 Business Epic 覆盖关系。
+   本章子域清单向后传递至第5章，作为BC识别的问题空间框架；子域分类向后传递至第8章，作为建模深度决策的依据。
+   本章各子节按以下顺序推导：4.1明确方法→4.2建立标准→4.3逐个定义→4.4映射业务域/4.5映射Epic（可并行）→4.6绘制全景图。先确定输入来源和分析步骤，再建立分类决策矩阵，然后逐个识别定义子域并应用矩阵分类，接着与业务域和Epic对照检查覆盖完整性，最后绘制子域全景图。

### 2.4.2 章节结构

+   第4章结构与内容要点如下表所示。

    | 编号 | 标题                     | 内容要点                                                                                                          | 内容模型                        |
    | ---- | ------------------------ | ----------------------------------------------------------------------------------------------------------------- | ------------------------------- |
    | 4.1  | 子域识别方法             | 从问题空间全景和业务域归类出发的子域识别步骤（以业务域归类为起点，允许拆分/合并/重划边界）                        |                                 |
    | 4.2  | 子域分类标准             | 核心域/支撑域/通用域的判断维度（竞争差异性、业务复杂度、可替代性、变更频率四维度）和决策矩阵                      | 子域分类决策矩阵                |
    | 4.3  | 子域定义                 | 各子域的职责定义（格式："管理/处理{业务对象}的{业务能力}"）、分类结果、投资策略                                   | 子域定义表                      |
    | 4.4  | 子域与业务域映射         | 子域与阶段2业务域的对应关系表（每个业务域至少映射一个子域）、差异说明                                             | 子域与业务域映射表              |
    | 4.5  | 子域与 Business Epic映射 | 子域与阶段2 Business Epic 的覆盖关系表（映射到Epic级别，不下沉到Feature；所有Epic至少被一个子域覆盖）、覆盖度检查 | 子域与 Business Epic 覆盖关系表 |
    | 4.6  | 子域全景图               | 子域分布全景图（标注核心域/支撑域/通用域、主要依赖关系）                                                          | 子域全景图                      |

    +   第4章结构与内容要点

+   补充说明：
    -   核心域数量不宜超过子域总数的 1/3，超过应检查是否将支撑域误判为核心域。
    -   子域识别粒度判断：两个候选子域的核心业务规则高度耦合应合并；一个候选子域内部包含两组独立变化的业务规则应拆分。

### 2.4.3 内容模型

#### 子域分类决策矩阵

    | 列名     | 填写说明                                     |
    | -------- | -------------------------------------------- |
    | 判断维度 | 如竞争差异性、业务复杂度、可替代性、变更频率 |
    | 核心域   | 该维度下核心域的典型特征                     |
    | 支撑域   | 该维度下支撑域的典型特征                     |
    | 通用域   | 该维度下通用域的典型特征                     |

    +   决策矩阵表列定义

#### 子域定义表

    | 列名     | 填写说明                                         |
    | -------- | ------------------------------------------------ |
    | 子域编号 | 格式由《P01-软件开发编号规范》定义               |
    | 子域名称 | 子域的中文名称                                   |
    | 分类     | `核心域` / `支撑域` / `通用域`                   |
    | 职责定义 | 一句话描述该子域解决的业务问题                   |
    | 投资策略 | 核心域→自建；通用域→采购/复用；支撑域→视情况决定 |
    | 关键理由 | 分类判断的关键依据（引用决策矩阵的维度）         |

    +   子域定义表列定义

+   子域定义表填写示例：

    | 子域编号 | 子域名称 | 分类   | 职责定义                     | 投资策略 | 关键理由                   |
    | -------- | -------- | ------ | ---------------------------- | -------- | -------------------------- |
    | SD-01    | 订单域   | 核心域 | 管理订单全生命周期的业务流转 | 自建     | 高竞争差异性、高业务复杂度 |
    | SD-02    | 认证域   | 通用域 | 管理用户身份认证与授权       | 采购     | 低差异性、市场有成熟方案   |
    | SD-03    | 仓储域   | 支撑域 | 管理仓库库存的出入库和盘点   | 视情况   | 中等复杂度、部分可标准化   |

    +   子域定义表填写示例

#### 子域与业务域映射表

    | 列名       | 填写说明                                         |
    | ---------- | ------------------------------------------------ |
    | 子域编号   | 本章定义的子域编号                               |
    | 子域名称   | 子域中文名称                                     |
    | 业务域编号 | 阶段2定义的业务域编号                            |
    | 业务域名称 | 阶段2定义的业务域名称                            |
    | 映射关系   | `一对一` / `拆分` / `合并` / `新增` / `重划边界` |
    | 差异说明   | 映射关系非"一对一"时的具体差异描述               |

    +   子域与业务域映射表列定义

#### 子域与 Business Epic 覆盖关系表

    | 列名           | 填写说明                                   |
    | -------------- | ------------------------------------------ |
    | 子域编号       | 本章定义的子域编号                         |
    | 子域名称       | 子域中文名称                               |
    | 覆盖的Epic编号 | 该子域覆盖的 Business Epic 编号列表        |
    | 未覆盖Epic检查 | 不属于任何子域的 Epic → 记录原因和处理方式 |

    +   覆盖关系表列定义

#### 子域全景图

    -   以子域为节点，标注分类（核心域/支撑域/通用域）
    -   用不同边框样式区分三类子域（如双线框=核心域、单线框=支撑域、虚线框=通用域）
    -   标注子域间的主要依赖关系（箭头方向=依赖方向）
    -   遵循排版格式规范 6.1~6.5 节的文本图规则

## 2.5 第5章 限界上下文识别与定义

### 2.5.1 章节目的

+   本章完成战略设计的核心决策，面向架构师和技术负责人，回答"解决方案空间应划分为哪些自治的模型边界"——限界上下文（BC）是后续所有阶段（系统设计、BC详细需求、BC总体设计、BC详细设计）的基本组织单元。
+   核心产出为BC清单（含职责定义、边界描述、所属子域、核心聚合、拥有的实体）、BC边界划定依据和BC内聚性验证结果。
+   本章BC清单向后传递至第6章，作为上下文映射的节点输入；向后传递至第8章，作为领域模型概要建模的范围依据；向后传递至第9章，作为 Enabler Epic 识别的BC维度输入；BC清单也是阶段4系统设计中BC到服务/模块映射的起点。
+   本章各子节按以下顺序推导：5.1明确方法→5.2建立原则→5.3逐个定义BC→5.4映射子域/5.5映射Epic→5.6内聚性验证。先确定输入和分析步骤，再建立边界划定原则，然后以每个子域为输入逐个识别定义BC，接着整理映射关系并检查覆盖度，最后执行内聚性验证。5.6验证不通过时应回退到5.3修正BC定义后重新验证。

### 2.5.2 章节结构

+   第5章结构与内容要点如下表所示。

    | 编号 | 标题                      | 内容要点                                                                                                                                                   | 内容模型                      |
    | ---- | ------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------- |
    | 5.1  | BC识别方法                | BC识别的输入、步骤和判断标准                                                                                                                               |                               |
    | 5.2  | BC边界划定原则            | 五个划定因素（语言边界、业务能力内聚、团队边界、数据所有权、变更频率）及其应用规则                                                                         | BC边界划定原则表              |
    | 5.3  | BC定义模板                | BC定义（含编号、名称、职责（格式："负责{业务对象}的{业务能力}，对外提供{服务}"）、边界、所属子域、核心聚合（仅列名称）、拥有的实体（仅所有者，非引用方）） | BC定义表                      |
    | 5.4  | BC与子域的关系            | BC与子域的映射关系表（一个子域可含多个BC；多个小子域可合并为一个BC；一个BC不得跨两个核心域子域）                                                           | BC与子域映射关系表            |
    | 5.5  | BC与 Business Epic 的映射 | BC与阶段2 Business Epic 的覆盖关系表、覆盖度检查汇总                                                                                                       | BC与 Business Epic 覆盖关系表 |
    | 5.6  | BC内聚性验证              | BC内聚性检查规则（语言一致性、变更独立性、数据所有权完整性）和验证结果                                                                                     | BC内聚性验证规则表            |
    |      |                           |                                                                                                                                                            | BC内聚性验证结果表            |

    +   第5章结构与内容要点

+   补充说明：
    -   实体所有权唯一：每个核心实体有且仅有一个BC作为所有者。多个BC中出现的实体区分"拥有方"和"引用方"。
    -   BC数量宜控制在子域总数的 1~2 倍；超过 3 倍应检查是否过度拆分。
    -   BC识别粒度判断：BC内部统一语言术语应具有唯一含义，业务规则可独立变更。同一术语出现两种含义时应拆分。

### 2.5.3 内容模型

#### BC边界划定原则表

    | 列名     | 填写说明                                                 |
    | -------- | -------------------------------------------------------- |
    | 划定因素 | 如语言边界、业务能力内聚、团队边界、数据所有权、变更频率 |
    | 定义     | 该因素的判断含义                                         |
    | 应用规则 | 如何根据该因素判断BC边界                                 |
    | 优先级   | 当多个因素冲突时的优先级排序                             |

    +   BC边界划定原则表列定义

#### BC定义表

    | 字段         | 填写说明                                        |
    | ------------ | ----------------------------------------------- |
    | BC编号       | 格式由《P01-软件开发编号规范》定义              |
    | BC名称       | BC的中文名称                                    |
    | 英文名称     | BC的英文名称（PascalCase，用于代码包名）        |
    | 所属子域     | 该BC归属的子域编号和名称                        |
    | 职责定义     | 一句话描述该BC的核心职责                        |
    | 边界描述     | 说明该BC包含什么、不包含什么                    |
    | 核心聚合     | 该BC拥有的核心聚合列表（聚合名称，第8章细化）   |
    | 拥有的实体   | 该BC拥有的核心实体列表（承接阶段2实体线）       |
    | 关键业务规则 | 该BC内部的关键业务规则概述（1~3条）             |
    | 边界划定依据 | 引用5.2节的划定因素，说明该BC边界的关键判断依据 |

    +   BC定义表字段定义

+   BC定义表填写示例：

    | 字段         | 内容                                                               |
    | ------------ | ------------------------------------------------------------------ |
    | BC编号       | BC-01                                                              |
    | BC名称       | 订单管理                                                           |
    | 英文名称     | OrderManagement                                                    |
    | 所属子域     | SD-01 订单域                                                       |
    | 职责定义     | 负责订单全生命周期管理，对外提供下单、改单、取消和查询服务         |
    | 边界描述     | 包含：订单创建、修改、取消、状态流转；不包含：支付处理、物流跟踪   |
    | 核心聚合     | 订单聚合、订单行项目聚合                                           |
    | 拥有的实体   | 订单、订单行项目、订单状态                                         |
    | 关键业务规则 | 订单金额超过阈值需审批；已发货订单不可取消                         |
    | 边界划定依据 | 语言边界（"订单"在此BC内含义唯一）+ 数据所有权（订单实体完整归属） |

    +   BC定义表填写示例

#### BC与子域映射关系表

    | 列名     | 填写说明                       |
    | -------- | ------------------------------ |
    | 子域编号 | 第4章定义的子域编号            |
    | 子域名称 | 子域中文名称                   |
    | BC编号   | 本章定义的BC编号               |
    | BC名称   | BC中文名称                     |
    | 映射关系 | `一对一` / `一对多` / `多对一` |
    | 说明     | 非一对一时的具体原因           |

    +   BC与子域映射关系表列定义

#### BC与 Business Epic 覆盖关系表

    | 列名           | 填写说明                           |
    | -------------- | ---------------------------------- |
    | BC编号         | 本章定义的BC编号                   |
    | BC名称         | BC中文名称                         |
    | 覆盖的Epic编号 | 该BC覆盖的 Business Epic 编号列表  |
    | 覆盖度检查     | `完全覆盖` / `部分覆盖` / `未覆盖` |

    +   覆盖关系表列定义

#### BC内聚性验证规则表

    | 列名     | 填写说明                   |
    | -------- | -------------------------- |
    | 规则编号 | 格式 `CV-{序号}`，序号两位 |
    | 验证规则 | 内聚性检查的具体规则描述   |
    | 验证方法 | 如何执行该项检查           |

    +   验证规则表列定义

#### BC内聚性验证结果表

    | 列名     | 填写说明                             |
    | -------- | ------------------------------------ |
    | BC编号   | 被验证的BC编号                       |
    | 规则编号 | 引用验证规则表的规则编号             |
    | 结果     | `通过` / `不通过` / `需关注`         |
    | 说明     | 不通过或需关注时的具体问题和处理建议 |

    +   验证结果表列定义

## 2.6 第6章 上下文映射

### 2.6.1 章节目的

+   本章定义BC之间的协作关系，面向架构师和集成开发人员，回答"各BC如何交互和集成"——上下文映射（Context Mapping）不仅定义技术集成方式，还反映团队间的协作模式和权力关系。
+   核心产出为上下文映射图（Context Map）和各BC对之间的关系定义（含映射模式、集成策略、数据流向）。上下文映射图是《N00-软件研发过程规范》定义的阶段3交付物之一。
+   本章跨BC数据流与交互契约向后传递至第9章，作为 Enabler Epic 识别的输入；上下文映射图向后传递至阶段4系统设计，作为集成方案设计的核心输入。

### 2.6.2 章节结构

+   第6章结构与内容要点如下表所示。

    | 编号 | 标题           | 内容要点                                                                                                                                                  | 内容模型       |
    | ---- | -------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
    | 6.1  | 上下文映射模式 | 各映射模式（Partnership/Shared Kernel/Customer-Supplier/Conformist/ACL/OHS/Published Language/Separate Ways等，仅列实际使用的）的定义、适用场景和选择判据 | 映射模式定义表 |
    | 6.2  | 上下文映射图   | BC间关系全景图（包含第5章所有BC，标注映射模式和数据流向）                                                                                                 | 上下文映射图   |
    | 6.3  | BC间关系定义   | 每对有直接交互的BC之间的关系定义（映射模式、选择理由、集成策略、交互契约概述（不展开API细节））                                                           | BC间关系定义表 |
    | 6.4  | 跨BC数据流     | 跨BC核心数据流识别（以数据对象为单位）、数据一致性策略（资金→强一致/状态同步→最终一致/查询→无要求）                                                       | 跨BC数据流表   |
    | 6.5  | 集成策略汇总   | 各集成模式的汇总（同步/异步、API/事件/共享数据等）及选择依据                                                                                              | 集成策略汇总表 |

    +   第6章结构与内容要点

+   补充说明：
    -   每对BC关系仅选择一种映射模式；多种交互场景需不同模式时分为多条记录。
    -   映射模式选择应与团队组织结构一致。

### 2.6.3 内容模型

#### 映射模式定义表

    | 列名     | 填写说明                                |
    | -------- | --------------------------------------- |
    | 模式名称 | DDD标准映射模式名称（中英文）           |
    | 定义     | 一句话定义该模式的协作关系              |
    | 适用场景 | 该模式的典型适用条件                    |
    | 权力关系 | 上游主导 / 下游主导 / 对等 / 无直接关系 |

    +   映射模式定义表列定义

#### 上下文映射图

    ```graph
    [绘制约定说明]

    节点样式：
      +------------------+
      | BC-XX            |
      | {BC名称}         |
      +------------------+

    关系连线：
      实线箭头 ——————> : 同步调用（箭头从调用方指向被调用方）
      虚线箭头 - - - -> : 异步事件（箭头从发布方指向消费方）

    标注：
      连线上方标注映射模式缩写
      连线下方标注关键数据对象名称（可选）
    ```

+   当BC数量超过 8 个时，宜按子域分区布局——同一子域的BC聚合在一起，子域之间用虚线框分隔。

#### BC间关系定义表

    | 列名     | 填写说明                             |
    | -------- | ------------------------------------ |
    | 关系编号 | 格式 `CM-{序号}`，序号两位           |
    | 上游BC   | 上游BC编号和名称                     |
    | 下游BC   | 下游BC编号和名称                     |
    | 映射模式 | 选用的映射模式名称                   |
    | 选择理由 | 选择该模式的关键原因（1~2句）        |
    | 集成方式 | 同步API / 异步事件 / 共享数据 / 其他 |
    | 交互契约 | 契约类型和关键约定概述               |

    +   BC间关系定义表列定义

+   BC间关系定义表填写示例：

    | 关系编号 | 上游BC         | 下游BC         | 映射模式                 | 选择理由                         | 集成方式 | 交互契约                 |
    | -------- | -------------- | -------------- | ------------------------ | -------------------------------- | -------- | ------------------------ |
    | CM-01    | BC-01 订单管理 | BC-03 库存管理 | Customer-Supplier        | 订单域为核心域，库存域按需适配   | 异步事件 | 订单确认事件触发库存预留 |
    | CM-02    | BC-04 用户认证 | BC-01 订单管理 | OHS + Published Language | 认证服务为多BC提供标准化身份验证 | 同步API  | OAuth2.0标准令牌验证     |

    +   BC间关系定义表填写示例

#### 跨BC数据流表

    | 列名       | 填写说明                                   |
    | ---------- | ------------------------------------------ |
    | 数据流编号 | 格式 `DF-{序号}`，序号两位                 |
    | 源BC       | 数据来源BC编号和名称                       |
    | 目标BC     | 数据消费BC编号和名称                       |
    | 数据对象   | 流转的核心数据对象名称                     |
    | 流转方式   | 同步查询 / 异步事件 / 数据复制             |
    | 一致性策略 | 强一致 / 最终一致 / 无一致性要求           |
    | 一致性机制 | 一致性策略非"无一致性要求"时的实现机制概述 |

    +   跨BC数据流表列定义

#### 集成策略汇总表

    | 列名         | 填写说明                             |
    | ------------ | ------------------------------------ |
    | 集成模式     | 同步API / 异步事件 / 共享数据 / 其他 |
    | 适用关系编号 | 引用6.3节关系定义表的关系编号列表    |
    | 选择依据     | 该模式的整体选择理由                 |
    | 技术约束     | 该模式对阶段4系统设计的技术约束      |

    +   集成策略汇总表列定义

## 2.7 第7章 领域事件全景

### 2.7.1 章节目的

+   本章从事件驱动视角识别领域中的关键业务事件，面向架构师和开发团队，回答"业务中发生了什么重要的事"——领域事件表示已经发生的、具有业务意义的事实，既是领域模型的组成部分，也是BC间异步集成的核心机制。
+   核心产出为领域事件清单（含事件定义、归属BC、触发条件、消费者）和事件流转全景图。事件按归属分为域内事件（BC内部消费）和跨域事件（触发其他BC响应）。
+   本章事件流转全景向后传递至第9章，作为 Enabler Epic 识别（如事件总线架构需求）的输入；跨域事件定义向后传递至阶段4系统设计，作为集成方案的事件维度补充。

### 2.7.2 章节结构

+   第7章结构与内容要点如下表所示。

    | 编号 | 标题             | 内容要点                                                                                                                                                       | 内容模型               |
    | ---- | ---------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------- |
    | 7.1  | 领域事件识别方法 | 事件识别的来源（EventStorming产出/实体生命周期状态转换/跨BC异步集成场景）、步骤和命名规则（英文PascalCase+过去时态`{Entity}{Action}ed`；中文"{实体}已{动作}"） |                        |
    | 7.2  | 事件分类         | 域内事件与跨域事件的分类标准                                                                                                                                   | 事件分类标准表         |
    | 7.3  | 领域事件清单     | 事件定义模板（事件名称（精确到具体状态变迁）、归属BC（唯一发布者）、触发条件、核心载荷（仅列字段名）、消费者BC）                                               | 领域事件定义表         |
    | 7.4  | 事件流转全景图   | 以BC为节点、跨域事件为连线的全景流转图（仅展示跨域事件，域内事件在7.3清单中记录）                                                                              | 事件流转全景图         |
    | 7.5  | 事件驱动集成模式 | (宜) 基于事件全景识别适用的集成模式（事件溯源、CQRS、Saga等）                                                                                                  | 事件驱动集成模式评估表 |

    +   第7章结构与内容要点

+   补充说明：
    -   事件表示已发生的事实，不应包含"请求""命令"语义。候选事件带命令语义时应转化为结果事件。
    -   每个事件对应一次状态变迁；包含两个独立业务含义的候选事件应拆分。
    -   跨域事件应与第6章数据流表交叉验证。

### 2.7.3 内容模型

#### 事件分类标准表

    | 列名     | 填写说明                 |
    | -------- | ------------------------ |
    | 分类     | `域内事件` / `跨域事件`  |
    | 定义     | 该分类的判断标准         |
    | 消费范围 | BC内部消费 / 跨BC消费    |
    | 典型用途 | 该分类事件的典型使用场景 |

    +   事件分类标准表列定义

#### 领域事件定义表

    | 列名     | 填写说明                                           |
    | -------- | -------------------------------------------------- |
    | 事件编号 | 格式由《P01-软件开发编号规范》定义                 |
    | 事件名称 | 采用过去时态命名，格式为"{实体}{动作}ed"           |
    | 中文名称 | 事件的中文描述名称                                 |
    | 归属BC   | 发布该事件的BC编号和名称                           |
    | 分类     | `域内事件` / `跨域事件`                            |
    | 触发条件 | 什么业务操作或状态变迁触发该事件                   |
    | 核心载荷 | 事件携带的关键数据字段列表（字段名，不含类型定义） |
    | 消费者BC | 消费该事件的BC编号和名称列表，域内事件填"本BC"     |

    +   领域事件定义表列定义

+   领域事件定义表填写示例：

    | 事件编号 | 事件名称       | 中文名称   | 归属BC         | 分类     | 触发条件             | 核心载荷                          | 消费者BC       |
    | -------- | -------------- | ---------- | -------------- | -------- | -------------------- | --------------------------------- | -------------- |
    | DE-01    | OrderConfirmed | 订单已确认 | BC-01 订单管理 | 跨域事件 | 订单审批通过         | orderId, confirmTime, totalAmount | BC-03 库存管理 |
    | DE-02    | StockReserved  | 库存已预留 | BC-03 库存管理 | 跨域事件 | 收到订单确认事件     | orderId, reservationId, items     | BC-01 订单管理 |
    | DE-03    | OrderCancelled | 订单已取消 | BC-01 订单管理 | 跨域事件 | 用户取消或超时未支付 | orderId, cancelReason, cancelTime | BC-03 库存管理 |

    +   领域事件定义表填写示例

#### 事件流转全景图

    -   以BC为节点（标注BC编号和名称）
    -   用带箭头的虚线连接事件发布方和消费方
    -   连线上标注事件名称（中文简称）
    -   同一对BC之间有多个事件时，合并为一条连线并列出事件名称
    -   遵循排版格式规范 6.1~6.5 节的文本图规则

#### 事件驱动集成模式评估表

    | 列名     | 填写说明                             |
    | -------- | ------------------------------------ |
    | 模式名称 | 如事件溯源、CQRS、Saga、简单事件通知 |
    | 适用场景 | 该模式的典型适用条件                 |
    | 适用事件 | 本项目中适用该模式的事件编号列表     |
    | 评估结论 | `推荐采用` / `待评估` / `不适用`     |
    | 备注     | 推荐理由或不适用原因                 |

    +   事件驱动集成模式评估表列定义

## 2.8 第8章 核心领域模型概要

### 2.8.1 章节目的

+   本章对各核心域BC进行聚合级的初步建模，面向架构师和领域建模人员，回答"每个核心BC内部的关键建模单元是什么"——在阶段3仅识别到聚合级别，明确聚合根、核心实体和关键值对象，不展开详细的属性定义和方法设计。
+   核心产出为各核心域BC的聚合清单（含聚合根、核心实体、关键值对象）、聚合边界划定依据和阶段2实体到聚合的映射关系。
+   本章聚合清单和实体映射向后传递至阶段6 BC总体设计，作为领域模型概要设计的起点；实体归属验证结果向后传递至第5章BC定义，作为BC边界合理性的交叉验证依据。
+   本章各子节按以下顺序推导：8.1确定范围→8.2明确方法→8.3逐BC识别聚合→8.4映射阶段2实体/8.5梳理引用关系（可并行）。先根据子域分类确定各BC建模深度，再确定聚合识别判断标准，然后以BC定义表中"拥有的实体"为输入逐BC识别聚合结构，接着将阶段2核心实体映射到聚合/实体/值对象，最后梳理聚合间引用关系。

### 2.8.2 章节结构

+   第8章结构与内容要点如下表所示。

    | 编号 | 标题           | 内容要点                                                                                                            | 内容模型             |
    | ---- | -------------- | ------------------------------------------------------------------------------------------------------------------- | -------------------- |
    | 8.1  | 建模范围与深度 | 建模深度选择（核心域→完整建模/支撑域→概要建模/通用域→不建模）；所有核心域BC应出现在8.3节                            | 建模范围说明表       |
    | 8.2  | 聚合识别方法   | 聚合识别的输入、步骤和聚合边界判断标准（事务一致性边界）                                                            |                      |
    | 8.3  | 各BC聚合清单   | 按BC分设子节（如"8.3.1 BC-01 订单管理聚合清单"），每个BC的聚合清单（聚合根、核心实体、关键值对象、核心不变量1~2条） | 聚合清单表           |
    | 8.4  | 阶段2实体映射  | 阶段2实体线核心实体到本章聚合/实体/值对象的映射关系表（归属应与第5章BC定义表一致）                                  | 阶段2实体映射关系表  |
    | 8.5  | 聚合间引用关系 | (宜) 跨聚合引用规则（仅通过聚合根ID引用，禁止直接对象引用；跨BC禁用值对象快照）和关系概览图                         | 聚合间引用关系概览表 |

    +   第8章结构与内容要点

+   补充说明：
    -   单个聚合宜控制在 1 个聚合根 + 不超过 5 个内部实体/值对象。
    -   聚合根是唯一外部访问入口。实体具有唯一标识和独立生命周期；值对象无标识、通过属性值定义相等性、不可变。
    -   每个聚合完整归属于一个BC，不得跨BC。

### 2.8.3 内容模型

#### 建模范围说明表

    | 列名         | 填写说明                               |
    | ------------ | -------------------------------------- |
    | BC编号       | 第5章定义的BC编号                      |
    | BC名称       | BC中文名称                             |
    | 所属子域分类 | 核心域 / 支撑域 / 通用域               |
    | 建模深度     | `完整建模` / `概要建模` / `本章不建模` |
    | 说明         | 建模深度选择的理由                     |

    +   建模范围说明表列定义

#### 聚合清单表

    | 列名       | 填写说明                           |
    | ---------- | ---------------------------------- |
    | 聚合编号   | 格式由《P01-软件开发编号规范》定义 |
    | 聚合名称   | 聚合的中文名称                     |
    | 英文名称   | 聚合的英文名称（PascalCase）       |
    | 聚合根     | 聚合根实体名称                     |
    | 核心实体   | 聚合内的核心实体名称列表           |
    | 关键值对象 | 聚合内的关键值对象名称列表         |
    | 不变量     | 聚合维护的核心业务不变量（1~2条）  |
    | 边界依据   | 该聚合边界划定的关键理由           |

    +   聚合清单表列定义

+   聚合清单表填写示例（BC-01 订单管理）：

    | 聚合编号 | 聚合名称 | 英文名称       | 聚合根 | 核心实体   | 关键值对象     | 不变量                      | 边界依据                 |
    | -------- | -------- | -------------- | ------ | ---------- | -------------- | --------------------------- | ------------------------ |
    | AG-0101  | 订单聚合 | OrderAggregate | 订单   | 订单行项目 | 收货地址、金额 | 订单总金额=各行项目金额之和 | 订单与行项目同事务一致性 |

    +   聚合清单表填写示例

#### 阶段2实体映射关系表

    | 列名          | 填写说明                              |
    | ------------- | ------------------------------------- |
    | 阶段2实体名称 | 阶段2实体线定义的核心实体名称         |
    | 归属BC        | 该实体在本章中归属的BC编号和名称      |
    | 映射为        | `聚合根` / `实体` / `值对象` / `拆分` |
    | 所属聚合      | 该实体所属的聚合编号和名称            |
    | 映射说明      | 映射为"拆分"时说明拆分为哪些建模元素  |

    +   实体映射关系表列定义

#### 聚合间引用关系概览表

    | 列名       | 填写说明                 |
    | ---------- | ------------------------ |
    | 引用方聚合 | 发起引用的聚合编号和名称 |
    | 被引用聚合 | 被引用的聚合编号和名称   |
    | 引用方式   | `ID引用` / `值对象快照`  |
    | 跨BC标记   | `BC内` / `跨BC`          |
    | 说明       | 引用的业务原因           |

    +   聚合间引用关系概览表列定义

## 2.9 第9章 架构需求分析（Enabler Epic）

### 2.9.1 章节目的

+   本章将领域设计过程中识别的跨BC架构决策显性化为 Enabler Epic（架构史诗），面向架构师和项目管理者，回答"领域设计产生了哪些架构需求"——识别来源包括第6章集成需求、第7章基础设施需求和第5章共性技术需求。
+   核心产出为 Enabler Epic 清单（含定义、追溯关系和优先级）、架构决策记录（ADR）和向阶段4的架构约束传递清单。
+   本章 Enabler Epic 清单向后传递至阶段4系统设计，在阶段4中分解为 Enabler Capability 和 Enabler Feature；架构约束传递清单向后传递至阶段4，作为系统设计的约束输入。
+   本章各子节按以下顺序推导：9.1梳理来源→9.2建立模板→9.3逐个识别并定义→9.4建立追溯/9.5记录ADR/9.6提取约束（可并行）。先从第5~7章梳理识别来源维度，再确定定义模板，然后按来源维度逐个识别并排定优先级，最后分别建立追溯关系、补充ADR记录、提取架构约束形成传递清单。

### 2.9.2 章节结构

+   第9章结构与内容要点如下表所示。

    | 编号 | 标题                              | 内容要点                                                                                                                                  | 内容模型              |
    | ---- | --------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------- | --------------------- |
    | 9.1  | Enabler Epic 识别来源             | 从上下文映射、领域事件、BC共性需求等维度识别架构需求                                                                                      | 识别来源维度表        |
    | 9.2  | Enabler Epic 定义模板             | Enabler Epic 定义（含编号、架构能力描述、业务价值、关联 Business Epic（每个Epic至少关联一个Business Epic））                              | Enabler Epic 定义模板 |
    | 9.3  | Enabler Epic 清单                 | 按优先级（高=阻塞核心域BC/中=影响集成效率/低=优化性）排列的 Enabler Epic 清单（每个Epic对应一个独立可交付的架构能力，本章仅定义Epic级别） | Enabler Epic 清单表   |
    | 9.4  | Business Epic → Enabler Epic 追溯 | Enabler Epic 与 Business Epic 的追溯关系表                                                                                                | 追溯关系表            |
    | 9.5  | 架构决策记录（ADR）               | 关键决策的结构化记录（覆盖第4~7章重大决策；初始版本状态为"已决定"或"待决定"）                                                             | ADR模板               |
    | 9.6  | 向阶段4的架构约束传递             | 领域设计对系统设计的约束清单（每种集成模式至少一条约束；每条可被阶段4直接采纳，避免笼统表述）                                             | 架构约束传递清单表    |

    +   第9章结构与内容要点

### 2.9.3 内容模型

#### 识别来源维度表

    | 列名     | 填写说明                                           |
    | -------- | -------------------------------------------------- |
    | 来源维度 | 如上下文映射集成需求、跨域事件基础设施、BC共性需求 |
    | 对应章节 | 本文档中提供输入的章节编号                         |
    | 识别方法 | 从该来源识别 Enabler Epic 的具体步骤               |
    | 典型产出 | 该来源通常产出的 Enabler Epic 类型                 |

    +   识别来源维度表列定义

#### Enabler Epic 定义模板

    | 字段              | 填写说明                                      |
    | ----------------- | --------------------------------------------- |
    | Epic编号          | 格式由《P01-软件开发编号规范》定义            |
    | Epic名称          | Enabler Epic 的中文名称                       |
    | 架构能力描述      | 该 Epic 提供的架构能力（一句话）              |
    | 业务价值          | 该架构能力对业务的价值说明                    |
    | 识别来源          | 引用9.1节的来源维度和具体章节内容             |
    | 关联Business Epic | 该 Enabler Epic 支撑的 Business Epic 编号列表 |
    | 涉及BC            | 该 Enabler Epic 影响的BC编号列表              |
    | 优先级            | `高` / `中` / `低`                            |
    | 优先级依据        | 优先级判断的关键理由                          |

    +   Enabler Epic 定义模板字段定义

+   Enabler Epic 定义表填写示例：

    | 字段              | 内容                                                  |
    | ----------------- | ----------------------------------------------------- |
    | Epic编号          | EE-01                                                 |
    | Epic名称          | 事件总线基础设施                                      |
    | 架构能力描述      | 提供跨BC异步事件发布与订阅的基础设施能力              |
    | 业务价值          | 支撑订单确认、库存预留等核心业务流程的异步集成        |
    | 识别来源          | 第6章上下文映射（CM-01等异步事件集成）+ 第7章跨域事件 |
    | 关联Business Epic | BE-01, BE-03                                          |
    | 涉及BC            | BC-01, BC-03, BC-05                                   |
    | 优先级            | 高                                                    |
    | 优先级依据        | 阻塞3个核心域BC的集成开发                             |

    +   Enabler Epic 定义表填写示例

#### Enabler Epic 清单表

    | 列名              | 填写说明                      |
    | ----------------- | ----------------------------- |
    | Epic编号          | Enabler Epic 编号             |
    | Epic名称          | Enabler Epic 名称             |
    | 架构能力描述      | 一句话描述                    |
    | 优先级            | `高` / `中` / `低`            |
    | 关联Business Epic | 关联的 Business Epic 编号列表 |
    | 涉及BC            | 影响的BC编号列表              |

    +   Enabler Epic 清单表列定义

#### 追溯关系表

    | 列名               | 填写说明                                      |
    | ------------------ | --------------------------------------------- |
    | Business Epic 编号 | 阶段2定义的 Business Epic 编号                |
    | Business Epic 名称 | Business Epic 名称                            |
    | Enabler Epic 编号  | 支撑该 Business Epic 的 Enabler Epic 编号列表 |
    | 追溯说明           | 追溯关系的业务逻辑说明                        |

    +   追溯关系表列定义

#### ADR模板

    | 字段     | 填写说明                               |
    | -------- | -------------------------------------- |
    | ADR编号  | 格式 `ADR-{序号}`，序号三位，从 001 起 |
    | 标题     | 决策主题的一句话描述                   |
    | 状态     | `已决定` / `待决定` / `已废弃`         |
    | 背景     | 决策产生的背景和约束条件（2~3句）      |
    | 决策     | 做出的具体决策内容                     |
    | 备选方案 | 评估过的其他方案及未采纳理由           |
    | 结果     | 该决策带来的正面影响和需要接受的权衡   |
    | 关联Epic | 该决策关联的 Enabler Epic 编号         |

    +   ADR模板字段定义

+   ADR填写示例：

    | 字段     | 内容                                                         |
    | -------- | ------------------------------------------------------------ |
    | ADR编号  | ADR-001                                                      |
    | 标题     | 订单域与库存域采用异步事件集成而非同步API                    |
    | 状态     | 已决定                                                       |
    | 背景     | 订单确认后需触发库存预留，两域由不同团队维护，高峰期并发量大 |
    | 决策     | 采用异步事件集成，订单域发布OrderConfirmed事件，库存域订阅   |
    | 备选方案 | 同步API调用——未采纳，因高峰期同步调用延迟不可控              |
    | 结果     | 降低域间耦合，接受最终一致性延迟（秒级）                     |
    | 关联Epic | EE-01                                                        |

    +   ADR填写示例

#### 架构约束传递清单表

    | 列名     | 填写说明                                            |
    | -------- | --------------------------------------------------- |
    | 约束编号 | 格式 `AC-{序号}`，序号两位                          |
    | 约束类别 | `BC部署约束` / `集成约束` / `数据隔离约束` / `其他` |
    | 约束描述 | 对阶段4系统设计的具体约束内容                       |
    | 来源     | 该约束的识别来源（引用本文档章节编号或ADR编号）     |
    | 影响范围 | 该约束影响的BC编号列表或系统模块                    |

    +   架构约束传递清单表列定义

# 3 附录编写规则

+   领域设计文档的附录分为两类：资料性附录（理解辅助，可选）和规范性附录（传递关键信息，必选）。各附录的可选/必选属性在其"章节目的"中标注；未标注的默认为可选。各附录的属性汇总见附录C输出内容总览表。
+   本章同时定义编写规范自身附录（附录C 规范体系定位）的编写规则。

## 3.1 附录A（资料性）术语速查

### 3.1.1 章节目的

+   本附录提供领域设计相关术语的快速查询索引，主要用于DDD术语和业务术语的对照查阅。
+   术语的权威定义见第3章统一语言章节和《软件开发术语规范》，本附录的简要定义仅供快速参照。

### 3.1.2 章节结构

    | 编号 | 标题               | 内容要点                          | 内容模型 |
    | ---- | ------------------ | --------------------------------- | -------- |
    | A.1  | DDD术语索引        | DDD核心术语的中英文对照和简要定义 |          |
    | A.2  | 本文档特有术语索引 | 本文档特有术语的定义来源指引      |          |

    +   附录A结构与内容要点

## 3.2 附录B（规范性）修订记录

### 3.2.1 章节目的

+   本附录记录文档版本演进历史，供版本追溯和变更审计使用。为规范性附录（必选）。

### 3.2.2 章节结构

    | 编号 | 标题     | 内容要点                                                                                   | 内容模型 |
    | ---- | -------- | ------------------------------------------------------------------------------------------ | -------- |
    | B.1  | 修订记录 | 按版本逆序记录每次修订的版本号、日期、修订内容、修订人；首行即为当前版本，兼作版本信息索引 |          |

    +   附录B内容框架

## 3.3 附录C（资料性）规范体系定位

### 3.3.1 章节目的

+   本附录展示领域设计编写规范在规范体系中的位置，明确上位规范、本规范管辖对象和目标文档之间的约束关系。面向编写者和评审者，帮助理解本规范的定位和适用边界。

### 3.3.2 章节结构

    | 编号 | 标题           | 内容要点                                                       | 内容模型       |
    | ---- | -------------- | -------------------------------------------------------------- | -------------- |
    | C.1  | 规范体系定位图 | 层级关系图，标注上位规范、本规范、管辖对象、目标文档及约束方向 | 规范体系定位图 |
    |      |                | 层级关系说明（一句话解释各层之间的约束含义）                   |                |
    | C.2  | 输入项表       | 编写领域设计文档所需的全部上游输入及其来源和用途               | 输入项表       |
    | C.3  | 输出内容总览   | 领域设计文档正文和附录各章节的对应内容及属性（必选/可选）      | 输出内容总览表 |

    +   附录C结构与内容要点

### 3.3.3 内容模型

#### 规范体系定位图

    ```graph
    ┌──────────────────────────────────────────────────────────────────┐
    │             领域设计编写规范在规范体系中的定位                   │
    ├──────────────────────────────────────────────────────────────────┤
    │                                                                  │
    │   上位规范                          本规范                       │
    │  ┌────────────────┐             ┌────────────────┐              │
    │  │ M01-通用规范   │  约束结构   │ S03-领域设计   │              │
    │  │   编写规范     │────────────▶│   编写规范     │              │
    │  └────────────────┘             │（本规范）      │              │
    │  ┌────────────────┐  约束体例   │                │              │
    │  │ S10-软件文档   │────────────▶│                │              │
    │  │   体例规范     │             └───────┬────────┘              │
    │  └────────────────┘                     │ 约束编写              │
    │                                         ▼                       │
    │   输入                          管辖对象                        │
    │  ┌────────────────┐             ┌──────────────────────┐       │
    │  │ 阶段2宏观需求  │            │ 03-领域设计文档      │       │
    │  │ 核心业务流程图 │───────────▶│（阶段3唯一输出物）   │       │
    │  │ 领域专家知识   │  提供输入   └──────────┬───────────┘       │
    │  │ 业务主题与业务域│                        │ 传递至             │
    │  └────────────────┘                        ▼                    │
    │                                 ┌──────────────────────┐       │
    │                                 │ 阶段4 系统设计       │       │
    │                                 └──────────────────────┘       │
    │                                                                  │
    └──────────────────────────────────────────────────────────────────┘
    ```

+   层级关系说明：95号规范约束本规范的文档组织结构（五层分区等）；96号规范约束本规范的编写体例（三层结构、四列表等）；本规范约束领域设计文档各章节的编写规则、内容要求和判断标准。

#### 输入项表

    | 输入文档                | 来源                 | 用途                                                                     |
    | ----------------------- | -------------------- | ------------------------------------------------------------------------ |
    | 宏观需求文档            | 阶段2                | Business Epic 清单、三线分析成果、业务域归类、基础性需求、非功能需求框架 |
    | 核心业务流程图          | 阶段2                | 端到端业务流程图，作为业务知识消化和领域划分的输入                       |
    | 领域专家知识            | 访谈/工作坊          | 通过领域专家访谈、EventStorming工作坊等方式获取的业务知识                |
    | 业务主题（THM）与业务域 | 阶段1（经阶段2传递） | 产品战略附录G定义的业务主题与业务域划分，作为子域识别的起点              |
    | Strategic Theme 清单    | 阶段1（经阶段2传递） | 战略主题清单和价值主张，作为子域分类优先级判断的参考                     |

    +   领域设计文档输入项表

#### 输出内容总览表

    | 内容                 | 对应章节  | 属性 |
    | -------------------- | --------- | ---- |
    | 概述                 | 正文第1章 | 必选 |
    | 业务知识消化         | 正文第2章 | 必选 |
    | 统一语言             | 正文第3章 | 必选 |
    | 领域划分与子域分类   | 正文第4章 | 必选 |
    | 限界上下文识别与定义 | 正文第5章 | 必选 |
    | 上下文映射           | 正文第6章 | 必选 |
    | 领域事件全景         | 正文第7章 | 必选 |
    | 核心领域模型概要     | 正文第8章 | 必选 |
    | 架构需求分析         | 正文第9章 | 必选 |
    | 术语速查             | 附录A     | 可选 |
    | 修订记录             | 附录B     | 必选 |

    +   领域设计文档输出内容总览表

+   阶段输出物包括领域划分、BC识别结果、上下文映射图、统一语言词汇表和 Enabler Epic 清单，与《N00-软件研发过程规范》阶段3的交付物定义保持一致。

# 附录A（资料性）术语表

+   业界通用术语（仅列出名称）：
    -   DDD、Bounded Context、Aggregate、Aggregate Root、Domain Event、Context Map、Ubiquitous Language、Subdomain、Core Domain、Supporting Subdomain、Generic Subdomain

+   文档专有术语：
    -   领域设计文档：阶段3"领域设计"的唯一正式输出物，为后续阶段4"系统设计"提供输入，文档编号03-领域设计
    -   内容模型：本规范中为各章节定义的结构化编写模板，规定了具体的表格列、图规范或文本模板，是AI辅助编写的直接输入
    -   三线分析成果：阶段2宏观需求文档中的活动线、角色线、实体线分析产出物的统称
    -   Enabler Epic（架构史诗）：领域设计过程中识别的跨BC架构需求，在阶段4中分解为 Enabler Capability 和 Enabler Feature

# 修订记录

| 标记 | 日期       | 修订内容                                                              | 修订人 |
| ---- | ---------- | --------------------------------------------------------------------- | ------ |
| 0.11 | 2026-02-24 | 按S10/C01/C02/90号规范全面修订体例结构                                | 丁劲松 |
|      |            | 第1章精简为声明式（编号/名称/适用对象/管辖范围/裁剪规则）             |        |
|      |            | 新增附录C规范体系定位（定位图+输入项表+输出内容总览表）               |        |
|      |            | 9章章节目的全部规范化（≤3要点、面向谁、推导逻辑、向后传递）           |        |
|      |            | 章节结构精简为四列表+补充说明；删除编写规则/推导说明/粒度标准独立段落 |        |
|      |            | 删除内容模型标题下铺垫说明                                            |        |
|      |            | 章节结构表内容模型列全部填充；取消全文图表编号                        |        |
| 0.10 | 2026-02-23 | 初始版本，合并大纲视图与正文2~9为编写规范统一文档                     | 丁劲松 |
