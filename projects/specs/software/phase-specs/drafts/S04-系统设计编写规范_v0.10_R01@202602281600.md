# 1 总则

+   文档编号：S04
+   文档名称：系统设计编写规范
+   目的：规定系统设计文档的章节结构、内容要求、判断标准与内容模型，确保系统设计文档的完整性和一致性
+   范围：系统设计文档（《软件研发过程规范》阶段4"系统设计"的输出物，文档编号04-系统设计）
+   管理要点：正文12章结构、三层结构、四列章节结构表、内容模型、架构需求清单
+   文档密级：【商密二级】 -- 外发必追责

# 2 系统设计综述

## 3.1 系统设计在研发过程中的定位

+   系统设计文档是阶段4"系统设计"的唯一正式输出物，承接阶段3"领域设计"输出的领域划分、BC识别、上下文映射、领域事件全景和 Enabler Epic 清单，为阶段5"BC详细需求"提供输入。
+   本文档从系统全局视角完成整体架构设计，核心目标是将 Enabler Epic 分解为 Enabler Capability（架构能力）和 Enabler Feature（架构特性），形成可落地的架构需求清单，并确定技术选型、集成策略、部署架构和非功能性需求方案。
+   本文档是所有下游BC级文档（BC详细需求、BC总体设计、BC详细设计）的全局约束来源。
+   系统设计文档在研发过程中的位置如下图所示。

    ```graph
    ┌────────────────────────────────────────────────────────────────────────┐
    │                   系统设计文档在研发过程中的定位                       │
    ├────────────────────────────────────────────────────────────────────────┤
    │                                                                        │
    │   上游输入                     阶段4                   下游输出        │
    │  ┌──────────────────┐    ┌──────────────┐    ┌──────────────────────┐  │
    │  │ 阶段3 领域设计   │───▶│              │───▶│ 04-系统设计文档      │  │
    │  │ ·子域/BC清单     │    │  系统设计    │    │ ·系统架构图          │  │
    │  │ ·上下文映射图    │    │              │    │ ·技术选型说明        │  │
    │  │ ·领域事件全景    │    └──────────────┘    │ ·集成方案            │  │
    │  │ ·Enabler Epic    │                        │ ·部署架构            │  │
    │  ├──────────────────┤                        │ ·非功能性方案        │  │
    │  │ 阶段2 宏观需求   │                        │ ·架构需求清单        │  │
    │  │ ·Business Epic   │                        │  (EC/EF)             │  │
    │  │ ·非功能需求框架  │                        └──────────┬───────────┘  │
    │  ├──────────────────┤                                   │              │
    │  │ 阶段1 产品战略   │                                   ▼              │
    │  │ ·版本路线图      │                        ┌──────────────────────┐  │
    │  └──────────────────┘                        │ 阶段5 BC详细需求     │  │
    │                                              └──────────────────────┘  │
    │                                                                        │
    └────────────────────────────────────────────────────────────────────────┘
    ```

    +   图1 系统设计文档在研发过程中的定位

## 3.2 系统设计的输入项

+   系统设计文档的上游输入项如下表所示。

    | 输入项                 | 来源               | 说明                                          |
    | ---------------------- | ------------------ | --------------------------------------------- |
    | 子域清单（含分类）     | 阶段3 领域设计文档 | 含子域投资策略                                |
    | BC清单                 | 阶段3 领域设计文档 | 含职责定义、边界描述、核心聚合                |
    | 上下文映射图           | 阶段3 领域设计文档 | 含映射模式和集成策略                          |
    | 领域事件全景           | 阶段3 领域设计文档 | 含事件清单和流转图                            |
    | 统一语言词汇表         | 阶段3 领域设计文档 | 领域业务术语                                  |
    | 核心领域模型概要       | 阶段3 领域设计文档 | 聚合级                                        |
    | Enabler Epic 清单      | 阶段3 领域设计文档 | 含与 Business Epic 的追溯关系                 |
    | 架构约束传递清单       | 阶段3 领域设计文档 | 向阶段4传递的约束                             |
    | Business Epic 清单     | 阶段2 宏观需求文档 | 含能力架构和版本分配（经阶段3传递或直接引用） |
    | 非功能需求框架         | 阶段2 宏观需求文档 | 全局级基线目标（经阶段3传递或直接引用）       |
    | 版本路线图             | 阶段1 产品战略文档 | 经上游阶段传递                                |
    | 技术约束与现有架构资产 | 外部输入           | 技术约束、组织约束、已有系统                  |

    +   表1 系统设计文档上游输入项

+   当上游输入不完整时，缺失内容记录为假设（AS-*），标注"来源：阶段N输出缺失"，确保上游输出完善后可回溯更新。

## 3.3 系统设计的输出内容

+   系统设计文档正文应覆盖以下内容，各项内容与章节的对应关系及附录属性如下表所示。

    | 内容                                         | 对应章节   | 属性 |
    | -------------------------------------------- | ---------- | ---- |
    | 概述                                         | 正文第13章  | 必选 |
    | 系统概述                                     | 正文第14章  | 必选 |
    | 集成架构设计                                 | 正文第13章  | 必选 |
    | BC与服务映射                                 | 正文第14章  | 必选 |
    | 系统架构设计                                 | 正文第13章  | 必选 |
    | 部署架构设计                                 | 正文第14章  | 必选 |
    | 非功能需求方案                               | 正文第13章  | 必选 |
    | 数据架构设计                                 | 正文第14章 | 必选 |
    | 安全架构设计                                 | 正文第13章 | 必选 |
    | 演进规划                                     | 正文第14章 | 必选 |
    | 架构需求清单（Enabler Capability / Feature） | 正文第13章 | 必选 |
    | 内容边界与追溯                               | 正文第14章 | 必选 |
    | 统一语言术语表                               | 附录A      | 可选 |
    | 架构决策记录（ADR）                          | 附录B      | 可选 |
    | 修订记录                                     | 文档末尾   | 必选 |

    +   表2 系统设计文档输出内容与章节对应关系

## 3.4 裁剪规则

+   章节结构表以四列定义：编号（对应目标文档的章节编号）、标题（对应目标文档的章节标题）、内容要点（该章节应包含的核心内容）、表达规范（指向本规范中定义的具体表达规范，无指向时留空）。
+   内容要点采用三级强制性标注：(必选)为不可省略项，缺失视为不合规；(宜)为推荐项，可根据实际裁剪；(可选)为可选项，根据产品特性自行决定。未标注的内容要点默认为必选项。
+   当某项内容在特定产品/项目中不适用时，允许裁剪。(必选)项不可裁剪，如确实不适用应保留章节标题并注明"本产品不适用，原因：{具体原因}"。(宜)或(可选)项可直接省略。默认必选（无标注）项如确有充分理由不适用，应保留章节标题并注明不适用原因。
+   不可裁剪的章节及理由：
    -   第4章 系统概述：全局约束基线，所有后续章节的前提
    -   第6章 BC与服务映射：从逻辑设计到物理设计的桥梁，阶段5及所有下游BC级文档的组织依据
    -   第7章 系统架构设计：架构风格和分层架构定义，所有BC遵循的技术约束
    -   第13章 架构需求清单：《N00-软件研发过程规范》明确要求系统设计文档包含"架构需求清单"章节
+   裁剪建议：

    | 项目规模 | 判断参考                   | 裁剪策略                                                                               |
    | -------- | -------------------------- | -------------------------------------------------------------------------------------- |
    | 标准项目 | BC >= 5，Enabler Epic >= 3 | 完整执行全部章节                                                                       |
    | 小型项目 | BC < 3，Enabler Epic <= 1  | 第5章可简化（省略全局事件规范细节）；第10章和第11章可合并；第12章可并入第7章技术选型小节 |

    +   表3 裁剪建议

+   裁剪后仍应确保追溯链完整性（Enabler Epic → Enabler Capability → Enabler Feature 的链路不断裂，且 Enabler Feature 与上游 Business Epic 的约束关系可追溯）。

# 3 正文章节结构

+   系统设计文档正文应包含12个章节，章节顺序固定，不应调整。
+   除正文外，文档应包含附录，附录编写规则见第4章。
+   3.1–3.12节分别定义各章节的编写规范，每节包含章节综述、章节结构（四列表）、表达规范（如有）三个层次。部分章节在章节结构表前后设有编写规则，作为该章节的约束性要求。

## 3.1 第3章 概述

### 3.1.1 章节综述


+   章节定位：概述是系统设计文档的导读章节，使读者快速了解文档目的、系统设计方法论框架和术语约定。本章不包含架构设计内容，所有设计从第4章开始。
+   核心问题：回答"本文档的目的是什么、采用什么方法论、如何与上下游文档协作"。
+   核心产出：系统设计方法论框架图和阶段定位说明。方法论框架图应涵盖从上游承接（领域设计成果、Enabler Epic）到架构需求输出（Enabler Capability / Enabler Feature）的完整设计逻辑链，体现"承接验收→系统概述→集成架构→服务映射→架构设计→非功能方案→架构需求分解"各环节。
+   向后传递：本章的术语约定为全文提供统一语言基础，方法论框架为后续章节提供组织逻辑。

### 4.1.2 章节结构

+   第3章结构与内容要点如下表所示。

    | 编号  | 标题       | 内容要点                                                                 | 表达规范 |
    | ----- | ---------- | ------------------------------------------------------------------------ | -------- |
    | **3** | **概述**   |                                                                          |          |
    | 5.1   | 文档目的   | 本文档的编写目的和适用范围                                               |          |
    | 5.2   | 方法论框架 | 系统设计方法论框架图、各环节职责概述、与上下游阶段的关系说明             |          |
    | 5.3   | 文档定位   | 本文档在研发过程中的位置（引用《N00-软件研发过程规范》）                 |          |
    | 5.4   | 术语约定   | 通用术语引用索引（引用《软件开发术语规范》）、本文档特有术语定义         |          |
    | 5.5   | 编号约定   | 各类条目的编号体系说明（引用《P01-软件开发编号规范》）                   |          |
    | 5.6   | 三层文档   | 系统设计→BC总体设计→BC详细设计的三层文档体系说明、各层职责边界和引用规则 |          |

    +   表4 第3章结构与内容要点

## 3.2 第4章 系统概述

### 3.2.1 章节综述

+   章节定位：本章从系统全局视角建立设计基线，回答"系统要解决什么问题、有哪些不可变前提"。
+   核心问题：回答"上游输入是否完整、设计目标是什么、有哪些约束条件"。
+   核心产出：上游承接验收表、设计目标表（业务目标和技术目标）、设计约束表。设计目标应可量化（如"核心操作P99响应时间 < 500ms"），设计约束是限制设计空间的不可谈判前提。
+   向后传递：约束清单为第7章技术选型和第9章非功能需求方案提供前提条件。

### 4.2.2 章节结构

+   上游承接验收应逐项确认阶段3领域设计的输出完整性（子域清单、BC清单、上下文映射图、Enabler Epic 清单等），缺失项记录为假设。
+   验收状态为"缺失"或"部分缺失"的条目，应在缺失处理列填写假设编号（AS-{序号}），假设应标注"来源：阶段N输出缺失"。
+   量化指标列不应为空；无法量化时填写"待细化，暂以定性描述代替"并标注细化时间节点。
+   约束清单中"影响范围"列应明确指向本文档后续章节，后续章节在引用约束时应标注约束编号。

+   第4章结构与内容要点如下表所示。

    | 编号  | 标题         | 内容要点                                                         | 表达规范       |
    | ----- | ------------ | ---------------------------------------------------------------- | -------------- |
    | **4** | **系统概述** |                                                                  |                |
    | 6.1   | 上游承接验收 | 逐项确认阶段3领域设计输出的完整性，缺失项记录为假设              | 上游承接验收表 |
    | 6.2   | 项目基本信息 | 项目名称、编号、所属产品线、项目阶段、当前设计版本范围           | 项目基本信息表 |
    | 6.3   | 设计目标     | 业务目标（含量化指标、优先级）和技术目标（含量化指标、优先级）   | 设计目标表     |
    | 6.4   | 利益相关方   | 利益相关方清单（角色、关注点、影响程度），承接阶段2角色线CL0/CL1 | 利益相关方表   |
    | 6.5   | 设计约束     | 技术约束、业务约束、组织约束（含来源和影响范围）                 | 设计约束表     |
    | 6.6   | 文档版本范围 | 当前文档覆盖的版本范围和功能范围                                 | 文档版本范围表 |

    +   表5 第4章结构与内容要点

### 3.2.3 表达规范

#### 上游承接验收表

+   验收范围应覆盖大纲视图"上游输入"中列出的所有阶段3输出物。验收粒度为阶段3领域设计文档的章节级输出物，每个独立输出物（清单、图、表）作为一个验收项，不展开到输出物内部的逐条验收。

    | 列名       | 填写说明                                            |
    | ---------- | --------------------------------------------------- |
    | 验收项编号 | 格式：ACP-{序号}                                    |
    | 上游章节   | 阶段3领域设计文档的具体章节号                       |
    | 验收内容   | 该章节应提供的输出物名称                            |
    | 验收状态   | 已确认 / 部分缺失 / 缺失                            |
    | 缺失处理   | 状态为"已确认"时留空；否则填写假设编号（AS-{序号}） |
    | 备注       | 补充说明（如"仅覆盖核心域BC，支撑域BC待阶段3补充"） |

#### 项目基本信息表

    | 列名         | 填写说明                             |
    | ------------ | ------------------------------------ |
    | 项目名称     | 系统全称和简称                       |
    | 项目编号     | 项目管理系统中的编号                 |
    | 所属产品线   | 归属的产品线或业务板块               |
    | 项目阶段     | 新建 / 迭代 / 重构                   |
    | 当前设计版本 | 当前文档覆盖的目标版本（如 V1.0 P1） |

#### 设计目标表

+   设计目标分为业务目标和技术目标两张表，列定义相同。每条目标应为一个可独立量化、独立验证的陈述，目标描述应为结果导向，不描述实现手段。
+   错误粒度示例："系统应高性能、高可用、安全" → 应拆为三条独立目标，各有量化指标。
+   业务目标应可追溯到阶段2宏观需求的 Business Epic，技术目标应可追溯到阶段3的 Enabler Epic 或本阶段识别的架构需求。

    | 列名     | 填写说明                                                 |
    | -------- | -------------------------------------------------------- |
    | 目标编号 | 业务目标格式 BG-{序号}，技术目标格式 TG-{序号}           |
    | 目标描述 | 一句话陈述目标                                           |
    | 量化指标 | 可测量的达成标准                                         |
    | 优先级   | P0（必达）/ P1（重要）/ P2（期望）                       |
    | 关联Epic | 关联的 Business Epic 或 Enabler Epic 编号（承接阶段2/3） |

+   设计目标示例（业务目标）：

    | 目标编号 | 目标描述               | 量化指标               | 优先级 | 关联Epic |
    | -------- | ---------------------- | ---------------------- | ------ | -------- |
    | BG-01    | 支撑多租户SaaS业务运营 | 支持 500+ 租户同时在线 | P0     | BE-01    |
    | BG-02    | 缩短订单处理周期       | 端到端处理时间 < 3s    | P1     | BE-03    |

    +   表  设计目标示例

#### 利益相关方表

    | 列名     | 填写说明                                   |
    | -------- | ------------------------------------------ |
    | 角色     | 利益相关方角色名称，承接阶段2角色线CL0/CL1 |
    | 关注点   | 该角色最关心的系统能力（1~3项）            |
    | 影响程度 | 高 / 中 / 低                               |
    | 代表人   | 具体联系人（如有）                         |

#### 设计约束表

+   每条约束应为一个不可分割的限制条件，约束描述应具体到可直接指导设计决策的程度。正确示例："数据库应使用 MySQL 8.0+"。错误示例："应使用成熟的数据库技术" → 过于模糊。

    | 列名     | 填写说明                                         |
    | -------- | ------------------------------------------------ |
    | 约束编号 | 格式：C-{序号}                                   |
    | 约束类型 | 技术约束 / 业务约束 / 组织约束                   |
    | 约束描述 | 具体约束内容                                     |
    | 来源     | 约束来源（如合规要求、已有系统、团队能力、上游） |
    | 影响范围 | 受约束影响的下游章节编号或设计决策领域           |

+   设计约束示例：

    | 约束编号 | 约束类型 | 约束描述                              | 来源             | 影响范围                     |
    | -------- | -------- | ------------------------------------- | ---------------- | ---------------------------- |
    | C-01     | 技术约束 | 数据库应使用 MySQL 8.0+               | 运维团队现有能力 | 第7章技术选型、第8章数据架构 |
    | C-02     | 业务约束 | 应满足等保三级合规要求                | 行业监管         | 第9章安全架构                |
    | C-03     | 组织约束 | 后端团队仅具备 Java/Spring 技术栈能力 | 团队现状         | 第7章技术选型                |

    +   表  设计约束示例

#### 文档版本范围表

    | 列名     | 填写说明                 |
    | -------- | ------------------------ |
    | 版本     | 版本号（如 V1.0 P1）     |
    | 功能范围 | 该版本覆盖的功能范围概述 |
    | 涉及BC   | 该版本涉及的BC编号       |
    | 详略度   | 完整设计 / 规划概述      |

## 3.3 第5章 集成架构设计

### 4.3.1 章节目的

+   本章定义系统内部BC间和外部系统的集成架构，回答"各组件如何通信和协作"。承接阶段3上下文映射的BC间关系定义和领域事件全景，将逻辑层面的映射模式和事件流转转化为具体的技术集成方案。
+   集成架构是系统稳定性的关键——大部分生产故障源于集成层（超时、数据不一致、级联故障）。依赖治理原则是全局硬约束，各BC可增加更严格的本地规则但不得放宽。
+   本章结论向后传递：集成方案为第6章BC服务映射提供技术约束，事件规范为第13章 Enabler Feature 定义提供集成维度输入，依赖治理原则为所有下游BC级文档提供全局约束基线。

### 4.3.2 章节结构

+   全局上下文映射图中的每条映射线，应在映射关系总览表中有对应记录；两者不一致时以映射关系总览表为准。
+   消息信封格式中以下字段为全局强制字段：eventId、eventType、eventVersion、occurredOn、source、aggregateId、aggregateType、payload。
+   全局硬约束：禁止循环依赖；禁止跨BC分布式事务（2PC/XA）；外部系统集成应通过ACL隔离；上游模型变更时下游应通过ACL隔离。

+   第3章结构与内容要点如下表所示。

    | 编号  | 标题             | 内容要点                                                                    | 内容模型             |
    | ----- | ---------------- | --------------------------------------------------------------------------- | -------------------- |
    | **5** | **集成架构设计** |                                                                             |                      |
    | 5.1   | 全局上下文映射图 | 技术实现版映射图（标注所有BC、映射模式、通信方式），承接阶段3第6章          | 全局上下文映射图规范 |
    | 5.2   | 映射关系总览     | 所有BC间映射关系汇总表                                                      | 映射关系总览表       |
    | 5.3   | 映射模式选型指南 | 各映射模式的适用场景、约束要求和选型标准                                    | 映射模式选型指南表   |
    | 5.4   | 内部通信架构     | 微服务间同步/异步通信方式选型矩阵                                           | 通信方式选型矩阵     |
    | 5.5   | API网关设计      | 网关职责、路由规则规范、限流熔断策略                                        |                      |
    | 5.6   | 事件驱动架构     | 消息中间件选型、全局事件规范（Topic命名、消息信封格式、幂等/重试/死信策略） | 统一消息信封格式表   |
    | 5.7   | 外部系统集成     | 外部系统清单（集成方向、集成方式、对接BC、防腐层要求、SLA要求）             | 外部系统集成清单     |
    | 3.8   | 全局依赖治理原则 | 跨BC依赖的统一治理规则                                                      | 全局依赖治理原则表   |

    +   表8 第3章结构与内容要点

### 3.3.3 内容模型

#### 全局上下文映射图规范

+   本图承接阶段3第6章的逻辑映射图，补充技术实现维度信息。使用文本图/ASCII图绘制，遵循《C02-排版格式规范》第6节图块规范。图中每个BC节点应标注BC编号、BC名称、对应微服务名称；每条映射线应标注映射模式缩写、通信方式（同步/异步）、协议。

#### 映射关系总览表

+   粒度为BC对级别。同一对BC之间存在多种集成方式时拆为多条记录。

    | 列名     | 填写说明                            |
    | -------- | ----------------------------------- |
    | 关系编号 | 格式：CM-{序号}                     |
    | 上游BC   | 上游BC编号和名称                    |
    | 下游BC   | 下游BC编号和名称                    |
    | 映射模式 | OHS+ACL / CS / CF / SK / PT / SW 等 |
    | 集成方式 | 同步API / 异步事件 / 共享库         |
    | 协议     | REST / gRPC / AMQP / Kafka Protocol |
    | 数据流向 | 单向 / 双向                         |
    | 协作场景 | 一句话描述该映射关系支撑的业务场景  |

#### 映射模式选型指南表

    | 列名       | 填写说明                 |
    | ---------- | ------------------------ |
    | 映射模式   | 模式名称及缩写           |
    | 适用场景   | 该模式的典型适用场景描述 |
    | 约束要求   | 上下游各自的实现约束     |
    | 耦合程度   | 低 / 中 / 高             |
    | 推荐优先级 | 用星级表示（1~5星）      |

#### 通信方式选型矩阵

    | 列名     | 填写说明                                     |
    | -------- | -------------------------------------------- |
    | 通信场景 | 同步查询 / 命令传递 / 数据同步 / 批量传输 等 |
    | 推荐方式 | 首选通信方式                                 |
    | 备选方式 | 替代方案                                     |
    | 约束要求 | 选用该方式时的强制约束（如超时、熔断、幂等） |
    | 选型依据 | 为该场景选择此方式的原因                     |

#### 统一消息信封格式表

    | 列名   | 填写说明                                        |
    | ------ | ----------------------------------------------- |
    | 字段名 | 消息信封中的字段名称                            |
    | 类型   | 数据类型（String / Object / Long 等）           |
    | 必填   | 是 / 否                                         |
    | 说明   | 字段用途和格式约束（如时间字段应注明 ISO 8601） |

#### 外部系统集成清单

    | 列名       | 填写说明                                       |
    | ---------- | ---------------------------------------------- |
    | 系统编号   | 格式：EXT-{序号}                               |
    | 系统名称   | 外部系统名称                                   |
    | 集成方向   | 调入（外部→本系统）/ 调出（本系统→外部）/ 双向 |
    | 集成方式   | REST API / SOAP / 文件 / 消息队列 / SDK        |
    | 对接BC     | 负责对接的BC编号                               |
    | 防腐层要求 | ACL适配器的实现要求描述                        |
    | SLA要求    | 可用性和响应时间要求                           |

#### 全局依赖治理原则表

    | 列名     | 填写说明                                           |
    | -------- | -------------------------------------------------- |
    | 治理场景 | 查询类依赖 / 命令类依赖 / 数据一致性 / 模型变更 等 |
    | 治理规则 | 该场景下的强制治理要求                             |
    | 违规后果 | 违反该规则可能导致的技术风险                       |

## 3.4 第6章 BC与服务映射

### 3.4.1 章节目的

+   本章定义BC到微服务和数据库的映射关系，回答"逻辑边界如何落地为物理部署单元"。默认规则为1:1:1，偏离默认规则的映射应记录决策原因。映射表是下游所有BC级文档引用频率最高的表格。
+   本章结论向后传递：映射关系为阶段5/6提供组织框架，微服务和数据库清单为第8章部署架构提供部署对象。

### 3.4.2 章节结构

+   BC编号应与阶段3 BC清单完全一致。阶段3 BC清单中的每个BC应在映射表中有对应记录。任何偏离1:1:1默认规则的映射应在映射决策说明表中有记录。

    | 编号  | 标题             | 内容要点                                                                  | 内容模型               |
    | ----- | ---------------- | ------------------------------------------------------------------------- | ---------------------- |
    | **6** | **BC与服务映射** |                                                                           |                        |
    | 6.1   | 映射总览         | BC→微服务→数据库映射表（BC编号/名称、微服务名称/端口、数据库名称/代码包） | BC→微服务→数据库映射表 |
    | 6.2   | 映射规则说明     | 默认1:1:1规则、允许例外、偏离规则的决策要求                               | 映射例外情形表         |
    | 6.3   | 微服务清单       | 微服务命名规范（`svc-{业务名}`）、端口分配规范、各微服务基本信息表        | 微服务清单表           |
    | 6.4   | 数据库清单       | 数据库命名规范（`{项目缩写}_{业务名}`）、各数据库基本信息表               | 数据库清单表           |
    | 6.5   | 映射决策说明     | 偏离默认规则的映射决策记录                                                | 映射决策说明表         |

    +   表9 第4章结构与内容要点

### 3.4.3 内容模型

#### BC→微服务→数据库映射表

    | 列名       | 填写说明                       |
    | ---------- | ------------------------------ |
    | BC编号     | 格式 BC-{两位序号}             |
    | BC名称     | 中文名称                       |
    | BC英文名   | 英文名称，用于代码和微服务命名 |
    | 微服务名称 | 遵循命名规范                   |
    | 微服务端口 | 服务端口号                     |
    | 数据库名称 | 遵循命名规范                   |
    | 代码包路径 | 主语言包路径前缀               |
    | 代码仓库   | Git 仓库地址或名称             |

#### 映射例外情形表

    | 例外类型       | 适用条件                                             |
    | -------------- | ---------------------------------------------------- |
    | 多BC合并微服务 | BC职责高度内聚、变更频率一致、团队相同               |
    | 一BC多数据库   | 读写分离、冷热数据分离、异构存储需求                 |
    | 多BC共享数据库 | 小型BC、成本敏感场景（应明确Schema或表前缀隔离策略） |

#### 微服务清单表

    | 列名         | 填写说明                               |
    | ------------ | -------------------------------------- |
    | 微服务名称   | 遵循命名规范                           |
    | 端口         | 服务端口号                             |
    | 包含BC       | 该微服务包含的BC编号（多个用逗号分隔） |
    | 核心职责     | 一句话概述                             |
    | 对外接口类型 | REST API / gRPC / GraphQL              |
    | 通信协议     | HTTP / gRPC / 消息队列                 |

#### 数据库清单表

    | 列名       | 填写说明                                                   |
    | ---------- | ---------------------------------------------------------- |
    | 数据库名称 | 遵循命名规范                                               |
    | 数据库类型 | MySQL / PostgreSQL / MongoDB / Redis 等                    |
    | 字符集     | UTF-8 / UTF-8MB4 等                                        |
    | 包含BC     | 该数据库归属的BC编号                                       |
    | 隔离策略   | 独享数据库 / 共享数据库-Schema隔离 / 共享数据库-表前缀隔离 |
    | 说明       | 补充说明                                                   |

#### 映射决策说明表

    | 列名     | 填写说明                                              |
    | -------- | ----------------------------------------------------- |
    | 决策编号 | 格式：MAP-{序号}                                      |
    | 偏离项   | 偏离默认1:1:1规则的具体映射描述                       |
    | 偏离类型 | 多BC合并微服务 / 一BC多数据库 / 多BC共享数据库 / 其他 |
    | 决策原因 | 为什么偏离默认规则                                    |
    | 风险     | 偏离带来的技术风险                                    |
    | 缓解措施 | 风险缓解方案                                          |

## 3.5 第7章 系统架构设计

### 3.5.1 章节目的

+   本章定义系统的整体架构风格、分层策略和技术选型，回答"系统采用什么架构范式、遵循什么分层标准、使用什么技术栈"。架构风格和分层架构定义对所有BC具有约束力。技术栈在系统设计中统一决策，各BC不应自行引入未列出的技术依赖。
+   本章结论向后传递：架构约束和技术选型为阶段6 BC总体设计提供技术基线。

### 3.5.2 章节结构

    | 编号  | 标题             | 内容要点                                                   | 内容模型           |
    | ----- | ---------------- | ---------------------------------------------------------- | ------------------ |
    | **7** | **系统架构设计** |                                                            |                    |
    | 7.1   | 架构风格         | 架构风格选型及依据（后端/前端/数据各维度）                 | 架构风格决策表     |
    | 7.2   | 系统架构拓扑图   | 全景架构图（前端层→网关层→服务层→数据层→基础设施层）       | 系统架构拓扑图规范 |
    | 7.3   | DDD分层架构      | 统一的分层定义、各层职责和依赖规则                         | DDD分层架构定义表  |
    | 7.4   | 全局技术选型     | 技术栈清单表（类别、名称、版本、用途、适用范围、选型依据） | 全局技术栈清单表   |
    | 7.5   | 技术选型约束     | 全局技术栈统一决策规则、BC级技术引入变更流程               |                    |

    +   表10 第5章结构与内容要点

### 3.5.3 内容模型

#### 架构风格决策表

    | 列名     | 填写说明                                             |
    | -------- | ---------------------------------------------------- |
    | 架构维度 | 后端架构 / 前端架构 / 数据架构 / 通信架构            |
    | 选定风格 | 微服务 / DDD分层 / CQRS / 事件驱动 / SPA / 微前端 等 |
    | 选型依据 | 为什么选择该风格                                     |
    | 约束     | 该风格对设计和开发的具体约束                         |
    | 关联ADR  | 对应的架构决策记录编号（ADR-{序号}）                 |

#### DDD分层架构定义表

+   核心原则：领域层不依赖任何外层；基础设施层通过依赖反转实现领域层定义的接口；各BC可细化子层但不得违反基本依赖规则。

    | 列名     | 填写说明                                           |
    | -------- | -------------------------------------------------- |
    | 层名称   | 接口层 / 应用层 / 领域层 / 基础设施层              |
    | 英文名   | interfaces / application / domain / infrastructure |
    | 职责     | 该层承担的具体职责（2~4项）                        |
    | 允许依赖 | 该层允许依赖的其他层名称                           |
    | 禁止依赖 | 该层禁止依赖的其他层名称                           |
    | 典型组件 | 该层包含的典型代码组件类型                         |

#### 全局技术栈清单表

    | 列名     | 填写说明                                            |
    | -------- | --------------------------------------------------- |
    | 技术类别 | 语言 / 框架 / 数据库 / 缓存 / 消息 / 监控 / 构建 等 |
    | 技术名称 | 具体技术或框架名                                    |
    | 版本     | 指定版本号（应精确到次版本号）                      |
    | 用途     | 在系统中的具体用途                                  |
    | 适用范围 | 全局 / 特定BC（注明BC编号）                         |
    | 选型依据 | 为什么选择该技术                                    |

## 3.6 第8章 部署架构设计

### 3.6.1 章节目的

+   本章定义系统的部署架构、环境规划和CI/CD策略，回答"系统如何部署到目标基础设施"。部署架构应与系统架构对齐。环境规划的核心是最小化环境差异。
+   本章为第9章非功能需求方案的可用性和容灾策略提供基础设施约束。

### 3.6.2 章节结构

    | 编号  | 标题             | 内容要点                                                   | 内容模型          |
    | ----- | ---------------- | ---------------------------------------------------------- | ----------------- |
    | **8** | **部署架构设计** |                                                            |                   |
    | 8.1   | 部署架构总览     | 部署架构图（基础设施层、计算/存储/中间件/网络拓扑）        | 部署架构图规范    |
    | 8.2   | 基础设施清单     | 基础设施清单表（资源类型、规格、数量、用途、高可用策略）   | 基础设施清单表    |
    | 8.3   | 环境规划         | 环境清单表（环境名称、用途、数据来源、资源规模、部署方式） | 环境清单表        |
    | 8.4   | CI/CD策略        | 流水线设计（阶段、触发条件、执行内容、质量门禁）           | CI/CD流水线设计表 |
    | 8.5   | 容器化与编排     | (宜) 容器化策略、K8s资源规划（如适用）                     | K8s资源规划表     |

    +   表11 第6章结构与内容要点

### 3.6.3 内容模型

#### 基础设施清单表

    | 列名       | 填写说明                                    |
    | ---------- | ------------------------------------------- |
    | 资源类型   | 计算 / 存储 / 网络 / 中间件                 |
    | 资源名称   | 具体资源名称（如 K8s Worker Node、RDS实例） |
    | 规格       | CPU/内存/存储规格                           |
    | 数量       | 实例数量                                    |
    | 用途       | 在系统中的用途                              |
    | 高可用策略 | 主从 / 集群 / 多AZ / 无                     |

#### 环境清单表

    | 列名     | 填写说明                                       |
    | -------- | ---------------------------------------------- |
    | 环境名称 | 开发(DEV) / 测试(SIT) / 预发(STG) / 生产(PROD) |
    | 用途     | 该环境的主要用途                               |
    | 数据来源 | Mock数据 / 脱敏数据 / 真实数据                 |
    | 访问范围 | 内网 / VPN / 公网                              |
    | 资源规模 | 相对于生产的比例（如 1/4、1/2、1:1）           |
    | 部署方式 | 手动 / 自动流水线                              |

#### CI/CD流水线设计表

    | 列名     | 填写说明                                      |
    | -------- | --------------------------------------------- |
    | 阶段     | 编译 / 单元测试 / 代码扫描 / 制品 / 部署 等   |
    | 触发条件 | Push / PR合并 / Tag / 手动 / 定时             |
    | 执行内容 | 该阶段的具体执行步骤                          |
    | 产出物   | 该阶段的产出（如JAR包、Docker镜像、测试报告） |
    | 质量门禁 | 该阶段应通过的质量检查（如覆盖率 >= 80%）     |

#### K8s资源规划表

    | 列名        | 填写说明                      |
    | ----------- | ----------------------------- |
    | Namespace   | K8s命名空间名称               |
    | 包含服务    | 该Namespace下部署的微服务列表 |
    | CPU配额     | 该Namespace的CPU资源限额      |
    | 内存配额    | 该Namespace的内存资源限额     |
    | Pod副本策略 | 最小/最大副本数、HPA触发条件  |

## 3.7 第9章 非功能需求方案

### 3.7.1 章节目的

+   本章将阶段2宏观需求的非功能需求框架转化为具体的系统级量化约束和实现方案。非功能约束对所有BC具有约束力——各BC可设更严格的本地目标但不得放宽全局基线。
+   本章结论向后传递：非功能约束为阶段5 BC详细需求中BC级非功能需求细化提供全局基线。

### 3.7.2 章节结构

    | 编号  | 标题                  | 内容要点                                                         | 内容模型                       |
    | ----- | --------------------- | ---------------------------------------------------------------- | ------------------------------ |
    | **9** | **非功能需求方案**    |                                                                  |                                |
    | 9.1   | 性能基线              | 系统级性能目标表（指标名称、目标值、适用场景、测量方式、级别）   | 系统级性能目标表               |
    | 9.2   | 可用性目标            | SLA定义表（服务级别、可用性目标、最大宕机时间、RTO、RPO）        | SLA定义表                      |
    | 9.3   | 可扩展性策略          | 水平扩展/垂直扩展/弹性伸缩方案                                   |                                |
    | 9.4   | 可观测性标准          | 全局标准（日志格式、指标命名、链路追踪规范、告警级别和升级策略） | 可观测性标准表、告警级别定义表 |
    | 9.5   | 与阶段2非功能框架映射 | 阶段2全局级基线到本章量化指标的映射关系                          | 与阶段2非功能框架映射表        |

    +   表12 第7章结构与内容要点

### 3.7.3 内容模型

#### 系统级性能目标表

    | 列名     | 填写说明                                 |
    | -------- | ---------------------------------------- |
    | 指标编号 | 格式：PERF-{序号}                        |
    | 指标名称 | 响应时间 / 吞吐量 / 并发数 / 错误率 等   |
    | 目标值   | 具体量化值（如 < 500ms、>= 1000 TPS）    |
    | 适用场景 | 读操作 / 写操作 / 批量操作 / 报表查询 等 |
    | 测量方式 | 如何测量和验证                           |
    | 级别     | 必达（SLA承诺）/ 期望（优化目标）        |

#### SLA定义表

    | 列名         | 填写说明                       |
    | ------------ | ------------------------------ |
    | 服务级别     | 核心服务 / 一般服务 / 辅助服务 |
    | 服务范围     | 属于该级别的微服务或BC列表     |
    | 可用性目标   | 百分比（如 99.9%、99.5%）      |
    | 最大宕机时间 | 月度允许的最大不可用时间       |
    | RTO          | 恢复时间目标                   |
    | RPO          | 恢复点目标                     |

#### 告警级别定义表

    | 列名     | 填写说明                      |
    | -------- | ----------------------------- |
    | 告警级别 | P0 / P1 / P2 / P3             |
    | 定义     | 该级别告警的触发条件描述      |
    | 通知渠道 | 电话 / 短信 / 即时消息 / 邮件 |
    | 响应时限 | 收到告警后的最大响应时间      |
    | 升级策略 | 超时未响应时的升级路径        |

#### 与阶段2非功能框架映射表

    | 列名          | 填写说明                           |
    | ------------- | ---------------------------------- |
    | 阶段2需求编号 | 阶段2宏观需求第8章的非功能需求编号 |
    | 阶段2需求描述 | 原始的全局级基线描述               |
    | 本章对应章节  | 本章中细化该需求的具体小节编号     |
    | 量化指标      | 细化后的具体量化指标               |
    | 覆盖状态      | 已覆盖 / 部分覆盖 / 未覆盖         |

## 3.8 第10章 数据架构设计

### 3.8.1 章节目的

+   本章定义系统的数据架构策略，回答"数据如何隔离、如何规范、如何保持一致"。数据一致性策略的核心原则是"拥抱最终一致性"——强一致性范围应限制在单个BC内。

### 3.8.2 章节结构

    | 编号  | 标题             | 内容要点                                                  | 内容模型                           |
    | ----- | ---------------- | --------------------------------------------------------- | ---------------------------------- |
    | **10** | **数据架构设计** |                                                           |                                    |
    | 10.1   | 数据隔离模型     | 多租户隔离方案选型及BC间隔离                              | 多租户隔离方案选型表               |
    | 10.2   | 数据库规范       | 表命名规范、字段命名规范、公共审计字段定义                | 字段命名规范表、公共审计字段定义表 |
    | 10.3   | 数据迁移策略     | 版本升级时的数据迁移方案                                  |                                    |
    | 10.4   | 数据一致性策略   | 全局一致性策略表（BC内/跨BC各场景的一致性方案）、禁止事项 | 全局数据一致性策略表               |

    +   表13 第8章结构与内容要点

### 3.8.3 内容模型

#### 多租户隔离方案选型表

    | 列名       | 填写说明                                             |
    | ---------- | ---------------------------------------------------- |
    | 隔离级别   | 独立数据库 / 共享数据库独立Schema / 共享数据库共享表 |
    | 说明       | 该隔离级别的实现方式描述                             |
    | 适用场景   | 适用的租户类型或业务场景                             |
    | 资源消耗   | 高 / 中 / 低                                         |
    | 安全性     | 最高 / 较高 / 一般                                   |
    | 运维复杂度 | 高 / 中 / 低                                         |

#### 字段命名规范表

+   表命名规范：`{bc_prefix}_{业务表名}`，全小写，下划线分隔。

    | 列名 | 填写说明       |
    | ---- | -------------- |
    | 规则 | 命名规则名称   |
    | 说明 | 规则的具体要求 |
    | 示例 | 正确的命名示例 |

#### 公共审计字段定义表

+   公共审计字段为全局强制字段，所有业务表应包含。

    | 列名   | 填写说明                                           |
    | ------ | -------------------------------------------------- |
    | 字段名 | 字段名称                                           |
    | 类型   | 数据类型（如 VARCHAR(36)、DATETIME、INT、TINYINT） |
    | 说明   | 字段用途                                           |
    | 必填   | 是 / 否                                            |

#### 全局数据一致性策略表

+   禁止事项：禁止跨BC分布式事务（2PC/XA）；禁止通过共享数据库表实现跨BC数据同步；禁止在应用代码中手动管理跨数据库事务。

    | 列名       | 填写说明                                            |
    | ---------- | --------------------------------------------------- |
    | 场景       | BC内单库事务 / BC内跨聚合 / 跨BC事务 / 跨BC数据同步 |
    | 一致性方案 | 本地事务 / 领域事件+最终一致性 / Saga / 事件发布    |
    | 实现工具   | 具体实现方式或工具                                  |
    | 约束       | 该方案的使用约束和前提条件                          |

## 3.9 第11章 安全架构设计

### 3.9.1 章节目的

+   本章定义系统的安全架构，回答"如何构建纵深防御体系"。安全架构从认证、授权、数据安全和网络安全四个层面构建，不依赖单一安全机制。
+   本章结论向后传递：安全架构为第13章 Enabler Feature 中安全相关特性提供方案基础。

### 3.9.2 章节结构

    | 编号  | 标题             | 内容要点                                                    | 内容模型       |
    | ----- | ---------------- | ----------------------------------------------------------- | -------------- |
    | **11** | **安全架构设计** |                                                             |                |
    | 11.1   | 认证架构         | 认证方案表（认证场景、认证方式、Token有效期、刷新策略）     | 认证方案表     |
    | 11.2   | 授权架构         | 授权模型选型、全局角色分类                                  | 授权模型选型表 |
    | 11.3   | 数据安全         | 数据分级表（公开/内部/敏感/机密的加密、脱敏和访问控制要求） | 数据分级表     |
    | 11.4   | 网络安全         | 网络隔离策略、传输加密要求、入侵检测方案                    |                |
    | 11.5   | 安全审计         | 审计范围、审计日志规范、保留策略                            | 审计范围定义表 |

    +   表14 第9章结构与内容要点

### 3.9.3 内容模型

#### 认证方案表

    | 列名        | 填写说明                                           |
    | ----------- | -------------------------------------------------- |
    | 认证场景    | 用户登录 / API调用 / 服务间调用 / SSO / 第三方登录 |
    | 认证方式    | JWT / OAuth2 / SAML / LDAP / mTLS / API Key        |
    | Token有效期 | Token的有效时长                                    |
    | 刷新策略    | Token续签/刷新机制描述                             |
    | 适用BC      | 全局 / 特定BC（注明编号）                          |
    | 说明        | 补充说明                                           |

#### 授权模型选型表

    | 列名     | 填写说明                                 |
    | -------- | ---------------------------------------- |
    | 授权维度 | 功能权限 / 数据权限 / 菜单权限 / API权限 |
    | 授权模型 | RBAC / ABAC / ACL                        |
    | 实现方式 | 具体实现方案描述                         |
    | 管理方式 | 静态配置 / 动态管理 / 混合               |

#### 数据分级表

    | 列名     | 填写说明                                             |
    | -------- | ---------------------------------------------------- |
    | 数据级别 | 公开 / 内部 / 敏感 / 机密                            |
    | 说明     | 该级别数据的特征描述                                 |
    | 加密要求 | 无 / 传输加密 / 传输+存储加密 / 传输+存储+字段级加密 |
    | 脱敏要求 | 无 / 日志脱敏 / 必须脱敏展示 / 禁止日志记录          |
    | 访问控制 | 无特殊要求 / 认证后可访问 / 授权后可访问 / 最小权限  |
    | 典型数据 | 属于该级别的典型数据举例                             |

#### 审计范围定义表

    | 列名     | 填写说明                                      |
    | -------- | --------------------------------------------- |
    | 审计类别 | 用户操作 / 数据访问 / 系统配置变更 / 权限变更 |
    | 审计内容 | 该类别下应记录的具体操作                      |
    | 审计级别 | 必审（强制记录）/ 宜审（推荐记录）            |

## 3.10 第12章 演进规划

### 3.10.1 章节目的

+   本章定义系统的版本演进路线图和架构演进策略，回答"系统如何分步演进、为未来预留了什么"。版本路线图应与业务目标对齐。当前版本的内容应完整详尽，未来版本仅保留规划概述。

### 3.10.2 章节结构

    | 编号   | 标题           | 内容要点                                                       | 内容模型       |
    | ------ | -------------- | -------------------------------------------------------------- | -------------- |
    | **12** | **演进规划**   |                                                                |                |
    | 12.1   | 版本路线图     | 版本计划表（版本号、里程碑、时间节点、核心目标、涉及BC、状态） | 版本计划表     |
    | 12.2   | BC版本覆盖矩阵 | 各版本与各BC的覆盖关系矩阵（F/B/-标记）                        | BC版本覆盖矩阵 |
    | 12.3   | 架构演进预留   | 已识别的架构演进方向（触发条件、当前预留、预估影响）           | 架构演进预留表 |
    | 12.4   | 技术债务追踪   | 已识别的技术债务及处理计划                                     | 技术债务追踪表 |
    | 12.5   | 版本标记规范   | 文档内版本标记方式（版本范围表、行内标记、节级标记）           |                |

    +   表15 第10章结构与内容要点

### 3.10.3 内容模型

#### 版本计划表

    | 列名     | 填写说明                                      |
    | -------- | --------------------------------------------- |
    | 版本号   | 版本标识（如 V1.0 P1、V1.0 P2、V2.0）         |
    | 里程碑   | 里程碑名称（如 MVP、Beta、GA）                |
    | 时间节点 | 计划交付日期                                  |
    | 核心目标 | 该版本的核心交付目标（可追溯到第2章设计目标） |
    | 涉及BC   | 该版本涉及的BC编号（逗号分隔）                |
    | 状态     | 规划中 / 设计中 / 开发中 / 已交付             |

#### 架构演进预留表

    | 列名     | 填写说明                           |
    | -------- | ---------------------------------- |
    | 方向编号 | 格式：EVO-{序号}                   |
    | 演进方向 | 未来可能的架构变化描述             |
    | 触发条件 | 什么业务或技术条件触发该演进       |
    | 当前预留 | 当前设计中为该演进所做的预留措施   |
    | 预估影响 | 执行该演进时的影响范围和工作量估算 |

#### 技术债务追踪表

    | 列名         | 填写说明                                             |
    | ------------ | ---------------------------------------------------- |
    | 债务编号     | 格式：TD-{序号}                                      |
    | 债务描述     | 已知的权宜之计或设计妥协的具体描述                   |
    | 产生原因     | 为什么采用权宜方案                                   |
    | 影响范围     | 受影响的BC或系统组件                                 |
    | 严重程度     | 高（阻碍演进）/ 中（增加维护成本）/ 低（可长期容忍） |
    | 计划处理版本 | 计划在哪个版本消除该债务                             |

## 3.11 第13章 架构需求清单

### 3.11.1 章节目的

+   本章将阶段3识别的 Enabler Epic 分解为 Enabler Capability（架构能力）和 Enabler Feature（架构特性）。这是《N00-软件研发过程规范》明确要求系统设计文档包含的核心章节。
+   分解逻辑：Enabler Epic → Enabler Capability → Enabler Feature。每个 Feature 应有明确验收标准和与上游的追溯关系。本章的分解产出应与第3-9章的设计方案保持一致。

### 3.11.2 章节结构

    | 编号   | 标题                                     | 内容要点                                           | 内容模型                                   |
    | ------ | ---------------------------------------- | -------------------------------------------------- | ------------------------------------------ |
    | **13** | **架构需求清单**                         |                                                    |                                            |
    | 13.1   | Enabler Epic 承接                        | 承接阶段3第9章 Enabler Epic 清单，逐项确认和验收   | Enabler Epic 承接验收表                    |
    | 13.2   | Enabler Capability 定义                  | 将 Enabler Epic 分解为跨BC的架构级能力             | Enabler Capability 定义表                  |
    | 13.3   | Enabler Feature 定义                     | 将 Capability 进一步分解为具体架构特性，含验收标准 | Enabler Feature 定义表                     |
    | 13.4   | Enabler Epic → Capability → Feature 追溯 | 完整的三级分解追溯表                               | 三级分解追溯表                             |
    | 13.5   | Enabler Feature → Business Epic 约束映射 | 标注各 Feature 对哪些 Business Epic 产生约束       | Enabler Feature → Business Epic 约束映射表 |
    | 13.6   | Enabler Feature → 设计方案映射           | 标注各 Feature 在本文档第3-9章中的技术方案对应章节 | Enabler Feature → 设计方案映射表           |
    | 13.7   | 架构需求优先级与版本分配                 | Capability / Feature 的优先级和版本归属            | 架构需求优先级与版本分配表                 |

    +   表16 第11章结构与内容要点

### 3.11.3 内容模型

#### Enabler Epic 承接验收表

    | 列名     | 填写说明                     |
    | -------- | ---------------------------- |
    | Epic编号 | 阶段3第9章 Enabler Epic 编号 |
    | Epic名称 | Enabler Epic 名称            |
    | 来源     | 阶段3文档章节引用            |
    | 验收状态 | 已确认 / 需澄清 / 已变更     |
    | 变更说明 | 状态为"已变更"时填写变更内容 |

#### Enabler Capability 定义表

    | 列名             | 填写说明                       |
    | ---------------- | ------------------------------ |
    | Capability编号   | 格式：EC-{序号}                |
    | Capability名称   | 架构能力名称                   |
    | 能力定义         | 一句话描述该架构能力的职责     |
    | 业务价值         | 该能力对业务的价值说明         |
    | 关联Enabler Epic | 上游 Enabler Epic 编号         |
    | 涉及BC           | 该能力涉及的BC编号（逗号分隔） |
    | 优先级           | P0 / P1 / P2                   |

#### Enabler Feature 定义表

    | 列名                   | 填写说明                     |
    | ---------------------- | ---------------------------- |
    | Feature编号            | 格式：EF-{序号}              |
    | Feature名称            | 架构特性名称                 |
    | Feature描述            | 该特性的具体内容描述         |
    | 验收标准               | 可验证的验收条件（1~3条）    |
    | 关联Enabler Capability | 上游 Enabler Capability 编号 |
    | 关联BC                 | 该特性归属或影响的BC编号     |
    | 版本归属               | 计划实现的版本号             |
    | 优先级                 | P0 / P1 / P2                 |

#### 三级分解追溯表

    | 列名               | 填写说明              |
    | ------------------ | --------------------- |
    | Enabler Epic       | Epic编号 + 名称       |
    | Enabler Capability | Capability编号 + 名称 |
    | Enabler Feature    | Feature编号 + 名称    |

#### 架构需求优先级与版本分配表

    | 列名     | 填写说明                       |
    | -------- | ------------------------------ |
    | 条目编号 | EC-{序号} 或 EF-{序号}         |
    | 条目名称 | Capability 或 Feature 名称     |
    | 条目层级 | Capability / Feature           |
    | 优先级   | P0 / P1 / P2                   |
    | 版本归属 | 计划实现的版本号               |
    | WSJF评分 | 加权最短作业优先评分（如适用） |

## 3.12 第14章 内容边界与追溯

### 3.12.1 章节目的

+   本章明确系统设计文档与上下游文档的内容边界，回答"什么在系统设计中定义、什么引用上游、什么留给下游"。追溯关系确保从战略到实现的完整可追溯性。

### 3.12.2 章节结构

    | 编号   | 标题                   | 内容要点                                                         | 内容模型                     |
    | ------ | ---------------------- | ---------------------------------------------------------------- | ---------------------------- |
    | **14** | **内容边界与追溯**     |                                                                  |                              |
    | 14.1   | 系统设计 vs 宏观需求   | 内容归属边界表                                                   | 内容归属边界表               |
    | 14.2   | 系统设计 vs 领域设计   | 内容归属边界表                                                   | 内容归属边界表               |
    | 14.3   | 系统设计 vs BC总体设计 | 内容归属边界表                                                   | 内容归属边界表               |
    | 14.4   | 当前版本 vs 未来版本   | 各设计内容在当前版本和未来版本的详略度要求                       | 当前版本 vs 未来版本详略度表 |
    | 14.5   | 架构需求追溯矩阵       | Enabler Epic → Enabler Capability → Enabler Feature 的完整追溯链 | 架构需求追溯矩阵             |

    +   表17 第12章结构与内容要点

### 3.12.3 内容模型

#### 内容归属边界表

    | 列名         | 填写说明                                    |
    | ------------ | ------------------------------------------- |
    | 内容类型     | 具体的设计内容名称                          |
    | 归属文档     | 系统设计 / 宏观需求 / 领域设计 / BC总体设计 |
    | 对方文档处理 | 完整定义 / 引用 / 遵循 / 不涉及             |
    | 说明         | 归属原因或处理方式的补充说明                |

#### 当前版本 vs 未来版本详略度表

    | 列名           | 填写说明                         |
    | -------------- | -------------------------------- |
    | 设计内容       | 具体的设计内容类型               |
    | 当前版本详略度 | 当前实施版本应提供的内容详细程度 |
    | 未来版本详略度 | 未来版本仅保留的内容详细程度     |

#### 架构需求追溯矩阵

+   追溯链中的每一级都应填写编号+名称，禁止留空。追溯关系应满足正向追溯、反向追溯和变更影响分析三种能力。

    | 列名               | 填写说明                            |
    | ------------------ | ----------------------------------- |
    | Strategic Theme    | 阶段1产品战略主题                   |
    | Business Epic      | 阶段2 Business Epic 编号+名称       |
    | Enabler Epic       | 阶段3 Enabler Epic 编号+名称        |
    | Enabler Capability | 本文档 Enabler Capability 编号+名称 |
    | Enabler Feature    | 本文档 Enabler Feature 编号+名称    |

# 4 附录编写规则

+   系统设计文档的附录分为两类：资料性附录（理解辅助，可选）和规范性附录（传递关键输入，必选）。各附录的属性汇总见第1章表2。

## 4.1 附录A（资料性）统一语言术语表

### 4.1.1 章节目的

+   汇总系统级的全部核心术语，建立统一语言。承接阶段3统一语言，补充技术架构相关术语。

### 4.1.2 章节结构

    | 编号 | 标题         | 内容要点                                          | 内容模型 |
    | ---- | ------------ | ------------------------------------------------- | -------- |
    | A.1  | 系统级术语表 | 术语定义（术语、英文、定义、所属子域/BC、同义词） |          |
    | A.2  | 术语维护规则 | 术语新增/变更流程、下游文档回溯更新规则           |          |

    +   表18 附录A结构与内容要点

## 4.2 附录B（资料性）架构决策记录（ADR）

### 4.2.1 章节目的

+   记录系统设计过程中的所有重大架构决策。ADR的核心价值是"避免重复讨论"。

### 4.2.2 章节结构

    | 编号 | 标题        | 内容要点                                                             | 内容模型 |
    | ---- | ----------- | -------------------------------------------------------------------- | -------- |
    | B.1  | ADR清单     | 架构决策记录（编号、标题、状态、日期、背景、决策、理由、备选、影响） |          |
    | B.2  | ADR分类参考 | 系统设计常见ADR类型                                                  |          |

    +   表19 附录B结构与内容要点

## 4.3 修订记录说明

### 4.3.1 章节目的

+   记录文档版本演进历史，供版本追溯和变更审计使用。

### 4.3.2 章节结构

    | 编号 | 标题     | 内容要点                                               | 内容模型 |
    | ---- | -------- | ------------------------------------------------------ | -------- |
    | C.1  | 修订记录 | 按版本逆序记录每次修订的版本号、日期、修订内容、修订人 |          |

    +   表20 附录C结构与内容要点

# 附录A（资料性）术语表

+   业界通用术语（AI已具备充分理解能力，仅列出名称）：
    -   DDD、BC（Bounded Context）、CQRS、Saga、ACL、OHS、gRPC、REST、AMQP、mTLS、JWT、OAuth2、RBAC、ABAC、SLA、RTO、RPO、HPA、CI/CD、2PC/XA

+   文档专有术语：
    -   系统设计文档：阶段4"系统设计"的唯一正式输出物，文档编号04-系统设计
    -   Enabler Capability（架构能力）：Enabler Epic 的第一级分解产出，代表跨BC的架构级能力，以EC编号标识
    -   Enabler Feature（架构特性）：Enabler Capability 的第二级分解产出，代表具体的、可验收的架构特性，以EF编号标识
    -   内容模型：本规范中为各章节定义的结构化编写模板，是AI辅助编写的直接输入
    -   映射模式：DDD上下文映射中定义的BC间协作关系类型
    -   1:1:1映射规则：一个BC对应一个微服务对应一个数据库的默认映射规则

# 修订记录

| 标记 | 日期       | 修订内容                                                            | 修订人 |
| ---- | ---------- | ------------------------------------------------------------------- | ------ |
| v0.10 | 2026-02-24 | 初始版本，基于大纲视图和各章内容模型合并为统一编写规范文档          | 丁劲松 |
|      |            | 按《S01-战略规划编写规范》样式改造文档结构                          |        |
|      |            | 第1章适用范围整合文档概述、上游输入、裁剪指引                       |        |
|      |            | 第2章正文章节结构整合12章内容模型，每章含章节目的、结构表、内容模型 |        |
|      |            | 第3章附录编写规则定义附录A~C                                        |        |
| R.01 | 2026-02-28 | 依据S00进行结构调整：第1章改为"总则"，新增第2章"系统设计综述"       | AI     |
|      |            | 调整章节编号：原第2章→第3章，原第3章→第4章                          |        |
|      |            | 修订记录从附录C移出，作为独立章节置于文档末尾                       |        |
