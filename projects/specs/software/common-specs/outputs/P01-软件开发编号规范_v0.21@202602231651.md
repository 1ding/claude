# 1 适用范围

+   文档编号：P01
+   文档名称：软件开发编号规范
+   适用范围：所有产品研发项目中软件开发过程各类条目的编号命名，包括但不限于需求、设计、API接口、测试用例、缺陷和项目管理条目
+   管辖范围：条目编号的双轨标识体系（语义ID与短号）、各类条目的编号格式与命名规则、编号变更与废弃规则
+   不管辖的范围：
    -   代码内部的变量名、函数名、类名等编程语言层面的命名（由编码规范约束）
    -   数据库表名、字段名等数据库层面的命名（由编码规范或数据库设计规范约束）
    -   文档文件名的命名（由文档管理规范约束）
    -   运维环境、部署配置等基础设施层面的命名（由运维规范约束）
+   文档密级：【机密】 -- 外发必追责。

# 2 编号双轨制总则

+   本规范对每个条目采用双轨标识体系，由语义ID和短号共同标识同一条目。

+   语义ID（Semantic ID）
    +   格式：`{类型前缀}-{模块}-{对象}-{动作/场景}`（具体格式因条目类型而异，详见第3章各节定义）
    +   用途：系统存储、代码引用、文档索引
    +   特点：表达业务含义，一经分配不应变更

+   短号（Short Code）
    +   格式：`{类型前缀}{3~4位数字}`
    +   用途：日常交流、会议讨论、快速检索
    +   特点：无业务含义，按递增顺序分配

+   同一条目的语义ID与短号应保持一一对应关系。语义ID为该条目的正式标识，短号为便捷引用标识。在正式文档中首次引用某条目时，宜同时标注语义ID和短号（如 `EPIC001: 用户认证体系 (EPIC-USER-auth)`）；后续引用可仅使用短号。

+   双轨制使用规则
    +   语义ID为条目的正式标识，用于条目自身的定义和描述
    +   短号为条目的便捷引用标识，在以下场景中应使用短号而非语义ID：
        +   追溯矩阵：构建追溯矩阵等密集引用场景时，应使用短号进行条目引用
        +   日常沟通：口头交流、会议记录、即时通讯等非正式场景中，宜使用短号以提升沟通效率
    +   语义ID中不应嵌入其他条目的短号或编号，条目之间的追溯关系应通过管理表（关联表）维护

+   标准缩写词典（附录E）和编号类型速查表（附录F）作为资料性参考收录在附录中。

## 2.1 通用规则

+   以下规则适用于所有类型条目的编号命名。各类型的专项规则详见第3章对应章节；如与本节通用规则存在差异，以各类型专项规则为准。

+   字符集与大小写
    +   类型前缀和业务域标识应使用大写英文字母，如 `EPIC`、`USER`、`ORDER`
    +   对象、动作、场景等语义片段应使用小写英文字母，如 `auth`、`login`、`success`。特定类型（如BC名称、SVC名称）使用大驼峰式命名（PascalCase）的，以该类型专项规则为准
    +   短号中的类型前缀应使用大写英文字母，数字部分以零填充至固定位数
    +   语义ID中各层级的角色通过大小写约定隐式区分：全大写片段为类型前缀或业务域标识，PascalCase片段为BC名称或服务名称，全小写片段为描述性语义

+   类型前缀管理
    +   所有条目类型的前缀应在编号类型速查表（附录F）中统一登记
    +   新增条目类型的前缀不应与已有前缀冲突；系统角色的类别缩写（§4.2）亦不应与已有条目类型前缀重复
    +   技术域标识（如 `ARCH`、`INFRA`、`SEC`、`PLATFORM`）用于Enabler类条目的语义ID中替代业务域片段，其标准列表见§3.3

+   分隔符
    +   语义ID各层级之间应使用连字符 `-` 分隔
    +   同一层级内的复合词应使用连字符 `-` 连接，如 `wrong-password`、`after-ship`
    +   不应使用下划线 `_`、斜杠 `/`、空格或其他分隔符

+   唯一性
    +   语义ID在全局范围内应保持唯一，不应出现两个不同条目使用相同语义ID的情况
    +   短号在同一类型前缀内应保持唯一，按递增顺序分配，不应重复使用或回收已分配的短号
    +   类型前缀在全局范围内应保持唯一，新增条目类型时不应与已有前缀冲突。所有已分配的前缀统一登记在编号类型速查表（附录F）中

+   语义ID层级解析约定
    +   语义ID中各层级的角色通过大小写约定隐式区分：
        +   全大写片段为类型前缀或业务域/技术域标识（如 `EPIC`、`USER`、`ARCH`）
        +   PascalCase片段为BC名称或服务名称（如 `OrderPlacement`、`UserService`）
        +   全小写片段为描述性语义（如 `auth`、`login-password`）

+   短号位数
    +   各条目类型的短号数字位数在第3章各节中定义。位数选择的一般原则如下：
        +   预估条目总量不超过99个的，使用2位数字（如 `BC01-`~`BC99`）
        +   预估条目总量在100~999个的，使用3位数字（如 `EPIC001`~`EPIC999`）
        +   预估条目总量可能超过999个的，使用4位数字（如 `TC0001`~`TC9999`）
    +   短号位数一经确定不应中途变更。如预分配位数不足，应在当前序列用完后启用扩展位数（如从3位扩展至4位），已分配的短号保持不变

+   长度控制
    +   语义ID总长度宜控制在60个字符以内
    +   语义片段层级宜控制在5级以内，避免过深嵌套导致可读性下降
    +   例外：生命周期阶段（LC）等以其他条目语义ID为前缀的复合型编号，总长度可放宽至80个字符以内。超过80个字符时，应优先精简实体描述或阶段描述

+   业务域与技术域标识引用
    +   凡语义ID中含有业务域片段的条目类型，均应使用§3.2业务域定义表中的标准语义标识（如 `USER`、`ORDER`），不应使用短号（如 `DOM01`），不应自行定义域标识
    +   Enabler类条目（Enabler Epic、Enabler Feature、ECAP等）使用技术域标识替代业务域片段，标准技术域标识见§3.3

+   词汇规范
    +   语义片段应优先使用各类型命名词典中定义的标准词汇
    +   当标准词汇不能满足需要时，可扩展新词汇，但应遵循现有命名风格，并及时补充至命名词典中

+   语义片段命名质量
    +   各节中"描述应简洁明确"的含义为：语义片段应在1~4个英文单词内概括条目的核心含义，不应包含冗余或重复信息
    +   判断命名是否合格的检查要点：
        -   单个语义片段宜控制在1~4个单词（以连字符连接），超过4个单词时应检查是否可精简
        -   不应在语义片段中重复已由类型前缀或业务域片段表达的信息。反例：`BS-ORDER-standard-order-create`（`order` 与业务域 ORDER 重复），正例：`BS-ORDER-standard-create`
        -   不应使用无实际区分作用的泛化词汇。反例：`do-something`、`handle-data`
        -   同一层级的多个条目命名应使用一致的描述粒度和风格

+   短号管理
    +   所有条目类型的短号均应按递增顺序分配（按创建时间、报告时间或识别时间），不应插入、重排、重复使用或回收
    +   条目废弃时应在管理表中将其状态标记为"已废弃"，短号保留不再使用

+   编号变更与废弃
    +   语义ID一经分配不应变更。如因业务调整确需变更，应保留原语义ID的记录，新建语义ID，并在管理表中标注两者的替代关系
    +   已分配的短号不应回收或重新分配给其他条目
    +   以上规则适用于本规范定义的所有条目类型，各类型章节不再重复说明

+   例外处理
    +   当既有规则无法覆盖新出现的条目类型或命名场景时，应按以下步骤处理：
        -   在第3章中查找与新条目最相近的条目类型（相近性依据：条目的研发阶段归属、语义结构层级、业务用途），参照其编号格式进行命名
        -   在管理表中将该条目标注"待规范补充"，并记录参照的条目类型和选择理由
    +   项目组应定期收集此类例外情况，反馈至规范维护方统一补充

# 3 产品战略

+   第3~10章按研发过程规范定义的阶段组织各类条目的编号规范。各节的标准结构为：概念说明、编号格式（前缀 + 语义ID + 短号）、专属命名词典、示例、专项规则。§2.1已覆盖的通用规则不再在各节重复。

+   产品战略层在产品战略阶段（阶段1）定义，由产品/业务负责人主导。

## 3.1 主题（Theme）

+   Theme为战略级方向，定义产品的核心战略意图。

+   编号格式
    +   类型前缀：`THM`
    +   语义ID：`THM-{战略方向}`
    +   短号：`THM{3位数字}`

+   命名词典

    ```yaml
    战略方向（示例）:
      - growth                # 增长
      - retention             # 留存
      - monetization          # 变现
      - platform-upgrade      # 平台升级
      - compliance            # 合规
      - globalization         # 国际化
      - cost-reduction        # 降本
      - user-experience       # 用户体验
      - security-hardening    # 安全加固
      - ecosystem             # 生态建设
    ```

+   示例

    ```text
    THM001 = THM-growth                  # 增长战略
    THM002 = THM-retention               # 用户留存
    THM003 = THM-monetization            # 商业变现
    ```

+   专项规则
    +   一个产品线同期活跃的Theme数量宜不超过10个
    +   命名应体现战略意图，粒度介于"方向性"和"功能性"之间。正例：`growth`、`compliance`；反例（过于抽象）：`improve`；反例（过于具体）：`add-wechat-login`
    +   每个Theme下应包含一个或多个Epic，形成战略到业务目标的追溯关系

## 3.2 业务域（Domain）

+   业务域是系统按业务职能划分的顶层分区，用于在编号体系中标识条目的业务归属。一个业务域下可包含一个或多个限界上下文（BC）。

+   编号格式
    +   类型前缀：`DOM`
    +   语义ID：`DOM-{业务域名称}`，名称应使用全大写英文字母（如 `USER`、`ORDER`），复合词以连字符连接（如 `AFTER-SALES`）
    +   短号：`DOM{2~3位数字}`，仅用于独立引用和日常交流，不应嵌入其他条目的语义ID中

+   业务域定义表示例

    | 短号  | 语义ID        | 说明         |
    | ----- | ------------- | ------------ |
    | DOM01 | DOM-USER      | 用户域       |
    | DOM02 | DOM-ORDER     | 订单域       |
    | DOM03 | DOM-PRODUCT   | 商品域       |
    | DOM04 | DOM-PAYMENT   | 支付域       |
    | DOM05 | DOM-LOGISTICS | 物流域       |
    | DOM06 | DOM-MARKETING | 营销域       |
    | DOM07 | DOM-FINANCE   | 财务域       |
    | DOM08 | DOM-SYSTEM    | 系统基础设施 |

+   专项规则
    +   项目启动时应建立完整的业务域定义表，作为所有编号中业务域片段的标准依据
    +   各类条目语义ID中的业务域片段应使用本表中的语义标识（如 `USER`、`ORDER`），不应使用短号（如 `DOM01`）
    +   新增业务域时应提交至定义表统一登记

## 3.3 技术域标识

+   技术域标识用于Enabler类条目（Enabler Epic、Enabler Feature、架构能力等）语义ID中替代业务域片段，表示该条目属于技术基础设施而非某个具体业务域。

+   技术域标识定义表

    | 技术域标识 | 说明                                |
    | ---------- | ----------------------------------- |
    | ARCH       | 架构设计（架构风格、通信协议等）    |
    | INFRA      | 基础设施（部署、CI/CD、容器编排等） |
    | PLATFORM   | 平台能力（可观测性、配置中心等）    |
    | SEC        | 安全（认证协议、加密方案等）        |
    | DATA       | 数据工程（数据管道、ETL等）         |
    | DEVOPS     | DevOps（流水线、自动化工具等）      |

+   专项规则
    +   技术域标识仅用于Enabler类条目，Business类条目应使用§3.2业务域标识
    +   新增技术域标识时应提交至本表统一登记，不应自行定义

===SPLIT===

# 4 宏观需求

+   宏观需求在宏观需求分析阶段（阶段2）定义，由产品/业务负责人主导。

## 4.1 史诗（Epic）

+   Epic为大的业务目标或能力，是宏观需求的核心粒度，从系统角色痛点与期望推导，可追溯到业务目标。

+   编号格式
    +   类型前缀：`EPIC`
    +   语义ID：`EPIC-{业务域}-{功能模块}`
    +   短号：`EPIC{3位数字}`

+   命名词典

    ```yaml
    功能模块（示例）:
      USER域:
        - auth           # 认证
        - profile        # 资料
        - permission     # 权限
        - notification   # 通知
      ORDER域:
        - lifecycle      # 生命周期
        - fulfillment    # 履约
        - afterSales     # 售后
      PAYMENT域:
        - integration    # 集成
        - reconciliation # 对账
        - refund         # 退款
    ```

+   示例

    ```text
    EPIC001 = EPIC-USER-auth             # 用户认证体系
    EPIC002 = EPIC-ORDER-lifecycle        # 订单生命周期
    EPIC01-5 = EPIC-PAYMENT-integration    # 支付集成
    ```

+   专项规则
    +   Enabler Epic 与 Business Epic 共用 `EPIC` 前缀，通过语义ID中的业务域片段区分：Business Epic 使用业务域名称（如 `GRC`、`USER`），Enabler Epic 使用技术域标识（如 `ARCH`、`INFRA`、`PLATFORM`）
    +   项目启动时应在Epic清单中标注每条Epic的类型（Business / Enabler），以便排期和追溯

## 4.2 系统角色（System Role）

+   系统角色编码用于标识系统使用者的业务身份分类。

+   编号格式
    +   类型前缀：`SROLE`
    +   语义ID：`SROLE-{角色名称}`
    +   短号（两种方案）：
        +   默认方案（分类前缀）：`{系统角色类别缩写}{2~3位数字}`，适用于涉及多个利益相关方的项目（如SaaS平台）
        +   备选方案（统一前缀）：`SROLE{3位数字}`，适用于仅涉及单个利益相关方的项目

+   系统角色分类示例（以GRC SaaS平台为例）

    | 系统角色类别 | 类别缩写 | 说明                               |
    | ------------ | -------- | ---------------------------------- |
    | 平台运营方   | UP       | 平台自身运营、管理人员             |
    | 租户         | UR       | 入驻平台的企业租户内的业务职能岗位 |
    | C端用户      | UC       | 平台的个人用户                     |

+   命名词典

    ```yaml
    常见系统角色名称:
      platform-admin:       平台管理员
      platform-operator:    平台运营人员
      compliance-officer:   合规专员
      risk-officer:         风控专员
      security-manager:     安全经理
      ciso:                 首席信息安全官
      c-user:               C端个人用户
    ```

+   示例

    ```text
    UP01 = SROLE-platform-admin          # 平台管理员
    UR01 = SROLE-compliance-officer      # 合规专员
    UR04 = SROLE-ciso                    # CISO
    ```

+   在需求编号中嵌入系统角色标识（可选）
    +   当同一功能因系统角色不同而产生不同需求时，可在语义ID中嵌入系统角色标识。嵌入位置为业务域之后、对象或功能之前
    +   示例：`US-GRC-compliance-officer-policy-review`、`US-SYSTEM-platform-admin-tenant-approve`
    +   当功能不因系统角色而异时，不应嵌入系统角色标识

+   专项规则
    +   项目启动时应建立系统角色类别定义表和系统角色定义表
    +   采用分类前缀短号时，类别缩写应为2个大写字母，不应与已定义的条目类型前缀重复（如 `US`、`TC`、`API` 等已被占用）

## 4.3 业务角色（Business Role）

+   业务角色编码用于标识GRC制度文档中定义的职责承担者。业务角色与系统角色完全独立，各自维护独立编号体系。

+   编号格式
    +   类型前缀：`BROLE`
    +   语义ID：`BROLE-{制度域}-{角色描述}`，制度域为该业务角色所归属的制度或管控领域（如 `sdlc`、`iam`、`risk`），使用小写英文
    +   短号：`BROLE{3位数字}`，全局递增分配，不按制度域分组

+   命名词典

    ```yaml
    制度域（示例）:
      sdlc: 软件开发生命周期 | iam: 身份与访问管理 | risk: 风险管理
      audit: 审计 | incident: 事件管理 | bcp: 业务连续性管理
    角色描述（示例）:
      security-dev-owner / code-reviewer / compliance-approver
      risk-assessor / audit-executor / incident-handler
    ```

+   示例

    ```text
    BROLE001 = BROLE-sdlc-security-dev-owner     # 安全开发责任人
    BROLE002 = BROLE-sdlc-code-reviewer           # 代码审查人
    BROLE004 = BROLE-risk-risk-assessor           # 风险评估人
    ```

+   专项规则
    +   业务角色应从对应制度文档中直接识别，不应自行创造
    +   制度域缩写应在项目启动时统一登记，与业务域定义表分开维护

## 4.4 业务目标（Business Goal）

+   业务目标是从Theme分解出的具体业务层面的目标陈述，是困境识别的直接输入。

+   编号格式
    +   类型前缀：`BG`
    +   语义ID：`BG-{目标描述}`
    +   短号：`BG{3位数字}`

+   命名词典

    ```yaml
    目标描述（示例）:
      - improve-conversion / reduce-churn / expand-market-share
      - increase-arpu / shorten-onboarding / enhance-compliance
      - reduce-operational-cost
    ```

+   示例

    ```text
    BG001 = BG-improve-conversion        # 提升转化率
    BG002 = BG-reduce-churn              # 降低流失率
    ```

+   专项规则
    +   目标描述应体现可衡量的业务意图，包含动作和对象两个要素。正例：`improve-conversion`；反例：`make-better`、`optimize`

## 4.5 困境（Dilemma）

+   困境是业务层面达成目标的系统性障碍，是从业务目标分析得出的结构性问题。

+   编号格式
    +   类型前缀：`DLM`
    +   语义ID：`DLM-{困境描述}`
    +   短号：`DLM{3位数字}`

+   命名词典

    ```yaml
    困境描述（示例）:
      - high-entry-barrier / complex-registration / lack-engagement
      - fragmented-data / manual-process / low-trust
      - info-asymmetry / compliance-gap
    ```

+   示例

    ```text
    DLM001 = DLM-high-entry-barrier      # 准入门槛高
    DLM002 = DLM-complex-registration    # 注册流程复杂
    ```

+   专项规则
    +   困境应描述业务层面的系统性障碍，不应描述角色层面的具体问题（角色层面由痛点描述）
    +   描述应体现结构性和根因特征。正例：`fragmented-data`（根因）；反例：`report-slow`（现象）

## 4.6 痛点（Pain Point）

+   痛点是角色在工作中面临的具体问题，是从困境细化到角色层面的具体表现，也是Epic推导的直接输入。

+   编号格式
    +   类型前缀：`PP`
    +   语义ID：`PP-{角色名}-{痛点描述}`，角色名应与SROLE语义ID中的角色名称保持一致
    +   短号：`PP{3位数字}`

+   命名词典

    ```yaml
    痛点描述（示例）:
      # 流程类: registration-step-too-many / identity-verify-slow / approval-process-complex
      # 效率类: audit-inefficient / manual-data-entry / info-scattered
      # 体验类: navigation-confusing / feedback-delayed / error-message-unclear
    ```

+   示例

    ```text
    PP001 = PP-buyer-registration-step-too-many      # 买家：注册步骤过多
    PP003 = PP-operator-audit-inefficient             # 运营人员：审核效率低
    ```

+   专项规则
    +   痛点应与具体系统角色关联，不应出现无角色归属的痛点

## 4.7 期望（Expectation）

+   期望是角色对理想工作状态的正向描述，与痛点互为补充，共同作为Epic推导的输入。

+   编号格式
    +   类型前缀：`EXP`
    +   语义ID：`EXP-{角色名}-{期望描述}`，角色名应与SROLE语义ID中的角色名称保持一致
    +   短号：`EXP{3位数字}`

+   命名词典

    ```yaml
    期望描述（示例）:
      # 效率类: one-click-registration / quick-login / batch-operation
      # 体验类: multiple-auth-method / intuitive-navigation / real-time-feedback
      # 功能类: data-dashboard / automated-approval / flexible-permission
    ```

+   示例

    ```text
    EXP001 = EXP-buyer-one-click-registration    # 买家：一键注册
    EXP003 = EXP-tenant-admin-data-dashboard     # 租户管理员：数据看板
    ```

+   专项规则
    +   期望以正向表述为主，不应与痛点重复描述同一问题
    +   期望应与具体系统角色关联，不应出现无角色归属的期望

## 4.8 利益相关方（Stakeholder）

+   利益相关方是与产品相关的所有人员或组织的全集，是系统角色识别的上游输入。按层级分为L0（全景）、L1（特定利益相关方）和L2（系统角色，使用SROLE编号）。SH编号仅标识L0/L1层级。

+   编号格式
    +   类型前缀：`SH`
    +   语义ID：`SH-{利益相关方描述}`
    +   短号：`SH{2位数字}`

+   示例

    ```text
    SH01 = SH-platform-operator-group    # 平台运营方（L0）
    SH02 = SH-operations-dept            # 运营部门（L1）
    SH04 = SH-enterprise-tenant-group    # 企业租户方（L0）
    ```

+   专项规则
    +   L2层级的系统角色应使用SROLE编号，不应使用SH编号

## 4.9 业务环节（Business Segment）

+   业务环节是客观发生的业务活动，描述"在什么情境下发生什么"，不依赖系统是否存在。属于三线演绎分析中活动线L2层级条目。

+   编号格式
    +   类型前缀：`BS`
    +   语义ID：`BS-{域缩写}-{活动描述}`
    +   短号：`BS{3位数字}`

+   命名词典

    ```yaml
    活动描述（示例）:
      USER域: tenant-onboarding-apply / tenant-qualification-audit / user-registration
      ORDER域: standard-create / payment-settle / fulfillment-dispatch
      PAYMENT域: initiate / reconciliation
    ```

+   示例

    ```text
    BS001 = BS-USER-tenant-onboarding-apply      # 租户入驻申请
    BS003 = BS-ORDER-standard-create             # 创建标准订单
    ```

+   专项规则
    +   活动描述中不应重复域缩写已表达的信息。正例：`BS-ORDER-standard-create`；反例：`BS-ORDER-standard-order-create`

## 4.10 关键实体（Key Entity）

+   关键实体是价值生态中具有明确生命周期状态流转的核心业务对象。属于实体线L1层级条目，每个关键实体下可定义生命周期阶段（LC）和事件（EVT）。

+   编号格式
    +   类型前缀：`EN`
    +   语义ID：`EN-{域缩写}-{实体描述}`
    +   短号：`EN{3位数字}`

+   命名词典

    ```yaml
    实体描述（示例）:
      USER域: tenant / user-account / user-credential
      ORDER域: order / order-item / shipment
      PAYMENT域: payment-order / refund-order
    ```

+   示例

    ```text
    EN001 = EN-USER-tenant               # 租户
    EN003 = EN-ORDER-order               # 订单
    EN004 = EN-PAYMENT-payment-order     # 支付单
    ```

+   专项规则
    +   当实体名称本身与域缩写相同（如ORDER域的 `order`）或为包含域名的复合业务术语（如 `payment-order`）时，保留完整名称，不视为与域缩写重复

## 4.11 生命周期阶段（Lifecycle）

+   生命周期阶段描述关键实体的状态流转节点，从属于关键实体（EN），其语义ID以所属实体的语义ID为前缀。

+   编号格式
    +   类型前缀：`LC`
    +   语义ID：`{实体语义ID}-LC-{阶段描述}`
    +   短号：`LC{3位数字}`，在所有实体的生命周期阶段中全局递增分配，不按实体分组

+   命名词典

    ```yaml
    阶段描述（示例）:
      # 通用: pending-audit / audit-approved / in-operation / deactivated / archived
      # 订单: pending-payment / paid / shipped / completed / cancelled / refunding
      # 支付: initiated / processing / settled / failed
    ```

+   示例

    ```text
    LC001 = EN-USER-tenant-LC-pending-audit      # 租户：待审核
    LC005 = EN-ORDER-order-LC-pending-payment    # 订单：待支付
    LC006 = EN-ORDER-order-LC-paid               # 订单：已支付
    ```

+   专项规则
    +   阶段描述应描述实体的稳定业务状态，不应描述瞬时动作或过渡状态

## 4.12 事件（Event）

+   事件是业务过程中发生的具有业务意义的动作或状态变化，通常与关键实体的生命周期阶段转换相关联。

+   编号格式
    +   类型前缀：`EVT`
    +   语义ID：`EVT-{域缩写}-{事件描述}`
    +   短号：`EVT{3位数字}`

+   命名词典

    ```yaml
    事件描述（示例）:
      USER域: tenant-apply-submitted / tenant-audit-approved / tenant-deactivated
      ORDER域: created / payment-completed / shipped / received / cancelled
      PAYMENT域: initiated / settled / refund-requested
    ```

+   示例

    ```text
    EVT001 = EVT-USER-tenant-apply-submitted     # 租户提交申请
    EVT004 = EVT-ORDER-created                   # 订单创建
    ```

+   专项规则
    +   事件应描述具有业务意义的动作或状态变化，不应描述系统内部的技术事件
    +   事件描述中不应重复域缩写已表达的信息

## 4.13 工作场景（Work Scenario）

+   工作场景是角色进入系统的切入点，描述角色在业务中承担的职责域，是角色的内部属性。

+   编号格式
    +   类型前缀：`WS`
    +   语义ID：`WS-{角色名}-{场景描述}`，角色名应与SROLE语义ID中的角色名称保持一致
    +   短号：`WS{3位数字}`

+   命名词典

    ```yaml
    场景描述（示例）:
      # 管理类: onboarding-qualification-mgmt / staff-permission-mgmt / tenant-audit-mgmt
      # 运营类: operations-data-view / data-monitor-report / campaign-mgmt
      # 业务类: order-processing / inventory-mgmt / customer-service
    ```

+   示例

    ```text
    WS001 = WS-tenant-admin-onboarding-qualification-mgmt   # 租户管理员：入驻与资质管理
    WS004 = WS-platform-admin-tenant-audit-mgmt             # 平台管理员：租户审核与管理
    ```

+   专项规则
    +   工作场景应描述角色的职责域切入点，不应描述具体操作步骤。正例：`tenant-audit-mgmt`；反例：`click-approve-button`
    +   与业务环节（BS）的区别：BS描述"业务中客观发生了什么"（不依赖系统），WS描述"角色通过系统从哪里切入这些活动"

## 4.14 关键旅程触点（Touchpoint）

+   触点是用户旅程中具有关键交互意义的接触点，衔接工作场景（WS）与用户故事（US）。

+   编号格式
    +   类型前缀：`TP`
    +   语义ID：`TP-{角色名}-{触点描述}`，角色名应与SROLE语义ID中的角色名称保持一致
    +   短号：`TP{3位数字}`

+   命名词典

    ```yaml
    触点描述（示例）:
      # 入口类: first-visit-landing / login-entry / registration-entry
      # 核心交互类: order-submit / payment-confirm / delivery-tracking
      # 反馈类: error-notification / success-confirmation / progress-indicator
    ```

+   示例

    ```text
    TP001 = TP-buyer-login-entry             # 买家：登录入口
    TP002 = TP-buyer-order-submit            # 买家：提交订单
    ```

+   专项规则
    +   触点粒度应介于工作场景（WS）和用户故事（US）之间

## 4.15 业务验收场景（Business Acceptance Scenario）

+   业务验收场景从业务视角定义Epic"完成"的端到端验收场景，粒度高于用户故事的验收标准（AC）。

+   编号格式
    +   类型前缀：`BAS`
    +   语义ID：`BAS-{业务域}-{场景描述}`
    +   短号：`BAS{3位数字}`

+   命名词典

    ```yaml
    场景描述（示例）:
      USER域: onboarding-e2e / password-reset-e2e
      GRC域: policy-publish-e2e / risk-assessment-e2e
      ORDER域: order-fulfillment-e2e / refund-e2e
    ```

+   示例

    ```text
    BAS001 = BAS-USER-onboarding-e2e         # 租户入驻全流程验收
    BAS002 = BAS-GRC-policy-publish-e2e      # 制度发布全流程验收
    ```

+   专项规则
    +   场景描述宜以 `-e2e` 后缀标识端到端特征
    +   每个Epic宜定义至少一个业务验收场景

## 4.16 基础性需求（Foundation Requirements）

+   基础性需求是跨BC的通用能力需求（功能性横切关注点），如身份认证、权限管理、审计日志等。

+   编号格式
    +   类型前缀：`FR`
    +   语义ID：`FR-{能力描述}`
    +   短号：`FR{2位数字}`

+   命名词典

    ```yaml
    能力描述（示例）:
      authentication / authorization / tenant-mgmt / audit-log
      notification / file-mgmt / data-dictionary / system-config
    ```

+   示例

    ```text
    FR01 = FR-authentication             # 身份认证
    FR02 = FR-authorization              # 权限管理
    FR04 = FR-audit-log                  # 审计日志
    ```

+   专项规则
    +   基础性需求应为跨BC的通用能力需求，单一BC内部的功能需求不应作为基础性需求
    +   与NFR的区别：FR定义"需要建设什么通用能力"（功能性），NFR定义"应达到什么质量水平"（质量约束）

## 4.17 非功能需求（Non-Functional Requirements）

+   非功能需求定义系统应达到的质量属性要求，包括性能、安全、可用性、可扩展性等。

+   编号格式
    +   类型前缀：`NFR`
    +   语义ID：`NFR-{类别}-{约束描述}`
    +   短号：`NFR{3位数字}`

+   命名词典

    ```yaml
    非功能需求类别:
      PERF: 性能 | SEC: 安全 | AVAIL: 可用性 | SCALE: 可扩展性
      COMPAT: 兼容性 | MAINT: 可维护性 | USAB: 易用性 | INTEG: 集成
      I18N: 国际化/本地化 | OBS: 可观测性

    约束描述（示例）:
      PERF: api-response-p95 / concurrent-user-capacity / page-load-time
      SEC: data-transmission-encryption / password-storage-encryption / session-timeout-policy
      AVAIL: system-uptime-sla / disaster-recovery-rto / failover-switchover-time
      SCALE: horizontal-scaling / database-sharding
      OBS: distributed-tracing / metrics-collection / alerting-response-time
    ```

+   示例

    ```text
    NFR001 = NFR-PERF-api-response-p95               # API响应时间P95
    NFR003 = NFR-SEC-data-transmission-encryption     # 数据传输加密
    NFR005 = NFR-AVAIL-system-uptime-sla              # 系统可用性SLA
    ```

+   专项规则
    +   非功能需求应定义可量化、可验证的质量属性约束，避免模糊描述（如"系统应足够快"）
    +   类别缩写应使用上述命名词典中定义的标准缩写

===SPLIT===

# 5 领域设计

+   领域设计在领域设计阶段（阶段3）定义，由架构师主导。本阶段定义限界上下文（BC）。

## 5.1 限界上下文（Bounded Context）

+   BC是领域驱动设计（DDD）中划分系统业务边界的核心概念。一个业务域下可包含一个或多个BC。

+   编号格式
    +   类型前缀：`BC`
    +   语义ID：`BC-{BC名称}`，名称使用大驼峰式命名（PascalCase），如 `OrderPlacement`、`Authentication`
    +   短号：`BC{2~3位数字}`，仅用于独立引用，不应嵌入其他条目的语义ID中

+   BC与业务域的关系示例

    ```text
    DOM02: 订单域 (DOM-ORDER)
      ├─ BC21: 下单 (BC-OrderPlacement)
      ├─ BC22: 履约 (BC-OrderFulfillment)
      └─ BC23: 查询 (BC-OrderQuery)
    ```

+   在语义ID中的可选嵌入
    +   当需要在条目编号中体现BC归属时，可在业务域之后嵌入BC的语义标识（不使用短号）
    +   示例：`US-ORDER-OrderPlacement-cart-submit`
    +   业务域下仅有一个BC或无需区分BC时，不应嵌入BC标识

+   专项规则
    +   BC名称中不应包含业务域名称前缀（如不应命名为 `OrderOrderPlacement`）
    +   PascalCase命名为§2.1"字符集与大小写"通用规则的例外情形

# 6 系统设计

+   系统设计在系统设计阶段（阶段4）定义，由架构师/技术负责人主导。

## 6.1 能力（Capability）

+   能力是跨限界上下文（跨ART）的大解决方案能力，需要多个BC协作交付，向下拆分为多个Feature实现。在阶段4（系统设计）中识别和定义，对应Business价值导向。

+   编号格式
    +   类型前缀：`CAP`
    +   语义ID：`CAP-{业务域}-{能力描述}`
    +   短号：`CAP{3位数字}`

+   命名词典

    ```yaml
    能力描述（示例）:
      GRC域:
        - cross-domain-compliance-check   # 跨域合规检查
        - policy-lifecycle-mgmt           # 制度全生命周期管理
      IAM域:
        - unified-identity-mgmt           # 统一身份管理
        - cross-tenant-permission-ctrl    # 跨租户权限管控
    ```

+   示例

    ```text
    CAP001 = CAP-GRC-cross-domain-compliance-check   # 跨域合规检查能力
    CAP002 = CAP-GRC-policy-lifecycle-mgmt           # 制度全生命周期管理能力
    ```

+   专项规则
    +   能力仅在大型项目（多BC协作交付）中使用；单BC可独立交付的需求应直接使用Feature，不应引入能力层级
    +   能力描述应体现业务价值目标，不应描述技术实现方式

## 6.2 架构能力（Enabler Capability）

+   架构能力是跨限界上下文的架构级能力，承载架构、基础设施、合规等技术工作。是能力（CAP）的Enabler变体，用于构建架构跑道。

+   编号格式
    +   类型前缀：`ECAP`
    +   语义ID：`ECAP-{技术域}-{能力描述}`，技术域使用§3.3定义的标准技术域标识
    +   短号：`ECAP{3位数字}`

+   示例

    ```text
    ECAP001 = ECAP-ARCH-unified-auth             # 统一认证体系
    ECAP002 = ECAP-INFRA-event-bus               # 跨服务事件总线
    ECAP003 = ECAP-PLATFORM-observability         # 可观测性平台
    ```

+   专项规则
    +   架构能力仅在大型项目中使用；单BC可独立完成的架构工作应直接使用Enabler Feature
    +   与业务能力（CAP）的区别：架构能力构建架构跑道，不直接交付用户可见的业务价值

## 6.3 系统模块/微服务（Service）

+   用于标识总体设计阶段划分的系统服务或模块单元，通常与一个或多个BC对应。

+   编号格式
    +   类型前缀：`SVC`
    +   语义ID：`SVC-{服务名称}`，名称使用大驼峰式命名（PascalCase），与代码仓库或部署单元命名保持一致
    +   短号：`SVC{3位数字}`

+   命名词典

    ```yaml
    服务名称（示例）:
      # 业务服务: UserService / OrderService / ProductService / PaymentService
      # 基础设施服务: GatewayService / AuthService / NotificationService / SearchService
    ```

+   示例

    ```text
    SVC001 = SVC-UserService             # 用户服务
    SVC002 = SVC-OrderService            # 订单服务
    SVC01-0 = SVC-GatewayService          # 网关服务
    ```

+   专项规则
    +   项目总体设计阶段应建立服务定义表，列举所有服务及其与BC的对应关系

## 6.4 架构决策记录（ADR）

+   用于记录项目中的重要架构决策及其背景、方案和理由。

+   编号格式
    +   类型前缀：`ADR`
    +   语义ID：`ADR-{决策主题}`
    +   短号：`ADR{3位数字}`

+   命名词典

    ```yaml
    决策主题（示例）:
      # 架构风格: microservice-split / event-driven-arch
      # 技术选型: database-selection / mq-selection / cache-strategy
      # 通信与集成: api-protocol / service-mesh / async-messaging
      # 运维与部署: container-orchestration / ci-cd-pipeline / log-aggregation
    ```

+   示例

    ```text
    ADR001 = ADR-microservice-split      # 微服务拆分策略
    ADR002 = ADR-database-selection      # 数据库选型
    ```

+   专项规则
    +   ADR一经记录不应删除，如决策被推翻，应新增一条ADR记录新决策，并在原ADR中标注"已被ADRxxx取代"

## 6.5 APM监控项（Application Performance Management）

+   用于标识应用性能管理中需要追踪的关键监控条目。

+   编号格式
    +   类型前缀：`APM`
    +   语义ID：`APM-{类别}-{监控描述}`
    +   短号：`APM{3位数字}`

+   命名词典

    ```yaml
    监控类别:
      TRACE: 链路追踪 | METRIC: 性能指标 | ALERT: 告警规则 | HEALTH: 健康检查
    监控描述（示例）:
      TRACE: api-gateway-entry / cross-bc-call
      METRIC: api-response-p95 / db-query-slow
      ALERT: error-rate-threshold / service-health-check
    ```

+   示例

    ```text
    APM001 = APM-TRACE-api-gateway-entry         # API网关入口链路追踪
    APM002 = APM-METRIC-api-response-p95         # API响应时间P95指标
    ```

+   专项规则
    +   APM监控项应与NFR中的可观测性约束建立追溯关系

# 7 BC详细需求

+   BC详细需求在BC级需求分析阶段（阶段5）定义，由BC级产品经理负责。

## 7.1 特性（Feature）

+   Feature为可独立交付的功能集，是详细需求的组织单元。每个Feature归属于一个Epic。

+   编号格式
    +   类型前缀：`FT`
    +   语义ID：`FT-{业务域}-{功能集}`
    +   短号：`FT{3位数字}`

+   命名词典

    ```yaml
    功能集（示例）:
      USER域: password-auth / sms-auth / oauth-auth / mfa / profile-mgmt
      ORDER域: standard-order / presale-order / order-cancel / order-tracking
      PAYMENT域: alipay-pay / wechat-pay / refund-process / reconciliation
    ```

+   示例

    ```text
    FT001 = FT-USER-password-auth        # 密码认证
    FT015 = FT-ORDER-standard-order      # 标准订单
    FT032 = FT-PAYMENT-alipay-pay        # 支付宝支付
    ```

+   专项规则
    +   Enabler Feature 与 Business Feature 共用 `FT` 前缀，通过业务域片段区分：Business Feature 使用业务域名称（如 `GRC`），Enabler Feature 使用技术域标识（如 `ARCH`、`INFRA`）

## 7.2 用户故事（User Story）

+   User Story为最小可交付价值单元，每条归属于一个Feature。

+   编号格式
    +   类型前缀：`US`
    +   语义ID：`US-{业务域}-[{角色}-]{对象}-{功能/场景}`，角色片段为可选（详见§4.2角色嵌入规则）
    +   短号：`US{3位数字}`

+   命名词典

    ```yaml
    对象（常用）:
      USER域: auth / profile / account / permission / preference
      ORDER域: item / status / payment / shipment / receipt
    功能/场景（常用动词）:
      查询类: get / query / list / search / view
      创建类: create / add / register / submit
      修改类: update / modify / edit / patch
      删除类: delete / remove / cancel / revoke
      业务动作: login / logout / verify / approve / reject / pay / refund / ship
    ```

+   示例

    ```text
    US001 = US-USER-auth-login-password              # 用户密码登录
    US089 = US-ORDER-create-standard                 # 创建标准订单
    US090 = US-ORDER-buyer-create-standard           # 买家创建标准订单（含角色）
    ```

## 7.3 验收标准（Acceptance Criteria）

+   AC定义User Story"完成"的标准。AC与所属US的追溯关系通过管理表维护，不在语义ID中嵌入US编号。

+   编号格式
    +   类型前缀：`AC`
    +   语义ID：`AC-{业务域}-{验收场景描述}`
    +   短号：`AC{3位数字}`

+   命名词典

    ```yaml
    验收场景描述（常用）:
      # 输入验证: login-input-valid / login-input-invalid / register-input-boundary
      # 业务规则: order-rule-check / order-precondition-met / permission-denied
      # 结果验证: login-success-response / order-data-persist / order-notification-sent
      # 非功能性: login-response-time / order-concurrent-access / payment-idempotency
    ```

+   示例

    ```text
    AC001 = AC-USER-login-input-valid                # 登录有效输入验收
    AC003 = AC-USER-login-success-response           # 登录成功响应验收
    AC045 = AC-ORDER-create-precondition-met         # 创建订单前置条件满足验收
    ```

+   专项规则
    +   TC与AC的区别：AC定义"完成的标准是什么"，TC定义"如何验证该标准"。一条AC可对应多条TC

## 7.4 业务规则（Business Rule）

+   业务规则是独立于具体用户故事的、可被多个需求条目共享引用的业务约束或策略。将业务规则独立编号管理，可在规则变更时快速追溯所有受影响的US和AC。

+   编号格式
    +   类型前缀：`BR`
    +   语义ID：`BR-{业务域}-{规则描述}`
    +   短号：`BR{3位数字}`

+   命名词典

    ```yaml
    规则描述（示例）:
      # 校验类: password-complexity / phone-format / email-format / id-card-checksum
      # 金额类: order-min-amount / refund-max-ratio / discount-stack-limit
      # 时间类: order-cancel-deadline / payment-timeout / token-expiry
      # 权限类: admin-only-delete / multi-approval-threshold / data-scope-isolation
      # 状态类: order-status-flow / tenant-lifecycle-constraint / inventory-lock-rule
    ```

+   示例

    ```text
    BR001 = BR-USER-password-complexity              # 密码复杂度规则
    BR002 = BR-ORDER-min-amount                      # 订单最低金额限制
    BR003 = BR-ORDER-cancel-deadline                 # 订单取消截止时限
    BR004 = BR-PAYMENT-refund-max-ratio              # 退款金额上限比例
    ```

+   专项规则
    +   业务规则应描述可独立表述、可被多个US/AC引用的约束或策略。仅在单个AC内生效且不会被其他条目引用的校验逻辑，不应提取为独立BR
    +   BR与AC的关系：BR定义"规则是什么"，AC定义"如何验证规则被正确实现"。一条BR可被多条AC引用
    +   业务规则变更时，应通过管理表追溯所有引用该BR的US和AC，评估变更影响范围

# 8 BC总体设计

+   BC总体设计在BC级总体设计阶段（阶段6）定义，由开发团队负责。

## 8.1 数据实体（Data Entity）

+   数据实体用于标识领域模型中需要在需求和设计文档中引用的核心领域对象，包括聚合根、实体和关键值对象。数据实体是§4.10关键实体（EN）在详细设计层的细化延伸：EN标识宏观业务对象，DE标识该业务对象拆解后的领域模型对象。

+   编号格式
    +   类型前缀：`DE`
    +   语义ID：`DE-{业务域}-{实体名称}`，实体名称使用PascalCase，与代码中的领域模型类名保持一致
    +   短号：`DE{3位数字}`

+   命名词典

    ```yaml
    实体名称（示例）:
      USER域:
        # 聚合根: UserAccount / Tenant / Credential
        # 实体: LoginRecord / AuthToken
        # 值对象: PhoneNumber / EmailAddress / Password
      ORDER域:
        # 聚合根: Order / ReturnOrder
        # 实体: OrderItem / OrderStatusLog
        # 值对象: Money / Address / OrderNumber
      PAYMENT域:
        # 聚合根: PaymentOrder / RefundOrder
        # 实体: PaymentTransaction
        # 值对象: PaymentMethod / BankAccount
    ```

+   示例

    ```text
    DE001 = DE-USER-UserAccount              # 用户账户（聚合根）
    DE002 = DE-USER-Credential               # 凭证（聚合根）
    DE003 = DE-USER-PhoneNumber              # 手机号（值对象）
    DE010 = DE-ORDER-Order                   # 订单（聚合根）
    DE011 = DE-ORDER-OrderItem               # 订单项（实体）
    DE012 = DE-ORDER-Money                   # 金额（值对象）
    ```

+   专项规则
    +   PascalCase命名为§2.1"字符集与大小写"通用规则的例外情形，与BC和SVC的命名风格一致
    +   DE与EN的区别：EN是宏观需求层的业务对象（如"租户""订单"），DE是详细设计层的领域模型对象（如 `Tenant` 聚合根、`Address` 值对象）。同一个业务概念可能同时有EN和DE编号
    +   宜在DE条目中标注其DDD分类（聚合根/实体/值对象），以便在设计文档中区分

# 9 BC详细设计

+   BC详细设计在BC级详细设计阶段（阶段7）定义，由开发团队负责。

## 9.1 API接口

+   用于标识系统内部的API接口。

+   编号格式
    +   类型前缀：`API`
    +   语义ID：`API-{业务域}-{对象}-{动作}[-{限定词}]`，限定词为可选（区分同一动作的不同方式、范围或第三方渠道）
    +   短号：`API{3位数字}`

+   命名词典

    ```yaml
    动作（RESTful风格）:
      基础CRUD: create / get / list / update / delete
      查询相关: query / search / filter
      业务动作: login / logout / verify / approve / reject / upload / pay / refund / ship
    限定词:
      方式: by-id / by-phone / by-email
      范围: single / batch / bulk
      特征: async / sync / partial / full
    ```

+   示例

    ```text
    API001 = API-USER-auth-login             # 登录
    API089 = API-ORDER-create                # 创建订单
    API156 = API-PAYMENT-refund              # 退款
    ```

## 9.2 外部集成接口（Integration Point）

+   用于标识与第三方系统或外部服务的集成接口。与内部API（§9.1）的区别：外部集成接口的版本、协议和可用性受外部方控制，需独立追踪其依赖状态和兼容性。

+   编号格式
    +   类型前缀：`INTG`
    +   语义ID：`INTG-{业务域}-{外部方}-{接口描述}`
    +   短号：`INTG{3位数字}`

+   命名词典

    ```yaml
    外部方（示例）:
      # 支付: alipay / wechat-pay / paypal / stripe
      # 物流: sf-express / zto / jd-logistics
      # 身份: wechat-oauth / dingtalk-oauth / ldap
      # 通信: twilio / aliyun-sms / sendgrid
      # 存储: aliyun-oss / aws-s3 / tencent-cos
      # 数据: gaode-map / baidu-ocr / openai

    接口描述（示例）:
      callback / notify / query-status / push-order
      auth-redirect / token-exchange / webhook
      upload / download / sync
    ```

+   示例

    ```text
    INTG001 = INTG-PAYMENT-alipay-callback           # 支付宝回调接口
    INTG002 = INTG-PAYMENT-wechat-pay-notify         # 微信支付通知
    INTG003 = INTG-LOGISTICS-sf-express-query-status  # 顺丰物流状态查询
    INTG004 = INTG-USER-wechat-oauth-token-exchange   # 微信OAuth令牌交换
    ```

+   专项规则
    +   每条INTG应记录外部方提供的API版本号，版本变更时应新增INTG条目并在管理表中标注替代关系
    +   INTG应与对应的内部API或US建立追溯关系，以便外部接口变更时评估影响范围

# 10 开发实现

+   开发实现在开发实现阶段（阶段8）定义，由开发团队负责。测试用例和缺陷贯穿开发和测试阶段，变更请求和风险贯穿全过程。

## 10.1 任务（Task）

+   Task用于记录实现User Story的具体开发任务。

+   编号格式
    +   类型前缀：`TASK`
    +   语义ID：`TASK-{类型}-{任务描述}`
    +   短号：`TASK{3位数字}`

+   命名词典

    ```yaml
    任务类型:
      DEV: 开发任务 | TEST: 测试任务 | OPS: 运维任务
      DOC: 文档任务 | DEVOPS: DevOps任务
    ```

+   示例

    ```text
    TASK001 = TASK-DEV-login-api-impl            # 登录接口开发
    TASK003 = TASK-TEST-login-integration-test   # 登录集成测试
    TASK089 = TASK-OPS-deploy-production         # 生产部署
    ```

+   专项规则
    +   已完成或已取消的Task不应删除，应将状态置为"已完成"或"已取消"

## 10.2 子任务（Sub-task）

+   Sub-task将Task进一步细分为更小的技术任务。与所属Task的追溯关系通过管理表维护，不在语义ID中嵌入Task编号。

+   编号格式
    +   类型前缀：`STASK`
    +   语义ID：`STASK-{任务场景}-{子任务描述}`
    +   短号：`STASK{3位数字}`

+   命名词典

    ```yaml
    子任务描述（常用）:
      开发类: db-schema-design / api-endpoint-impl / service-logic-impl / input-validation / error-handling
      前端类: page-layout / form-component / api-call-integration / state-management
      测试类: unit-test / integration-test / test-data-prepare
      运维类: config-setup / monitor-setup / log-setup
    ```

+   示例

    ```text
    STASK001 = STASK-login-api-db-schema-design      # 登录接口：数据库表结构设计
    STASK002 = STASK-login-api-endpoint-impl         # 登录接口：端点实现
    STASK006 = STASK-login-api-unit-test             # 登录接口：单元测试
    ```

## 10.3 测试用例（Test Case）

+   编号格式
    +   类型前缀：`TC`
    +   语义ID：`TC-{业务域}-{功能}-{测试点}`，当测试对象为API接口时，功能宜使用 `{接口功能}-api` 形式
    +   短号：`TC{4位数字}`

+   命名词典

    ```yaml
    测试点类型:
      功能测试: valid-input / invalid-input / success-flow / error-flow
      边界测试: boundary-check / min-value / max-value / empty / null / overflow
      异常测试: exception-handle / timeout / network-error / auth-fail
      性能测试: response-time / concurrent-request / rate-limit / load-test
      安全测试: sql-injection / xss-attack / csrf-check
    ```

+   示例

    ```text
    TC0001 = TC-USER-login-valid-input           # 登录有效输入测试
    TC0234 = TC-USER-login-api-success           # 登录接口成功响应测试
    TC1567 = TC-ORDER-create-insufficient-stock  # 创建订单库存不足测试
    ```

## 10.4 缺陷（Bug / Defect）

+   编号格式
    +   类型前缀：`BUG`
    +   语义ID：`BUG-{影响模块}-{简要描述}`，影响模块为业务域标识或技术基础设施标识（如 `API`、`DB`、`UI`、`INFRA`）
    +   短号：`BUG{4位数字}`

+   命名词典

    ```yaml
    简要描述（常用词汇）:
      崩溃/不可用: crash / hang / unresponsive / service-down / startup-failure
      数据问题: data-loss / data-corruption / calculation-error / duplicate-record
      状态问题: status-not-update / status-inconsistent / state-transition-error
      性能问题: response-timeout / slow-query / memory-leak / high-cpu
      显示/交互: page-crash / layout-broken / display-error / click-no-response
      逻辑错误: logic-error / condition-miss / null-pointer / permission-bypass
      集成/接口: callback-failure / sync-failure / encoding-error / format-mismatch
    ```

+   示例

    ```text
    BUG0001 = BUG-USER-login-page-crash              # 登录页崩溃
    BUG0234 = BUG-ORDER-price-calculation-error       # 订单价格计算错误
    BUG1567 = BUG-PAYMENT-refund-status-not-update   # 退款状态未更新
    ```

+   专项规则
    +   缺陷记录不应删除，已修复或确认无效的缺陷应将状态置为"已关闭"

## 10.5 变更请求（Change Request）

+   用于记录对已基线化的需求、设计或实现的变更申请。

+   编号格式
    +   类型前缀：`CR`
    +   语义ID：`CR-{模块}-{变更内容}`，模块为业务域或技术模块标识，变更内容以"动作-对象"形式概括
    +   短号：`CR{3位数字}`

+   命名词典

    ```yaml
    变更内容（常用动作）:
      add / modify / remove / replace / upgrade / rollback
    ```

+   示例

    ```text
    CR001 = CR-USER-add-wechat-login             # 新增微信登录
    CR045 = CR-ORDER-modify-cancel-policy        # 修改取消策略
    CR078 = CR-API-upgrade-auth-protocol         # 升级认证协议
    ```

+   专项规则
    +   变更请求应针对已基线化的条目，尚未基线化的内容调整不需要提交CR

## 10.6 风险（Risk）

+   用于记录项目执行过程中识别的技术风险或业务风险。

+   编号格式
    +   类型前缀：`RISK`
    +   语义ID：`RISK-{类别}-{风险描述}`
    +   短号：`RISK{3位数字}`

+   命名词典

    ```yaml
    风险类别:
      TECH: 技术风险 | BIZ: 业务风险 | RES: 资源风险 | EXT: 外部依赖风险
    ```

+   示例

    ```text
    RISK001 = RISK-TECH-database-performance         # 数据库性能风险
    RISK012 = RISK-BIZ-third-party-dependency        # 第三方依赖风险
    RISK025 = RISK-RES-backend-dev-shortage          # 后端开发人力不足
    ```

+   专项规则
    +   风险记录不应删除，已消除或已接受的风险应将状态置为"已关闭"

# 附录A（资料性）术语约定

+   本规范使用的通用术语已在《C99-天帷通用术语规范》中统一定义，具体定义参见该文档。

+   本规范特有术语定义如下

    | 术语     | 定义                                                                                          |
    | -------- | --------------------------------------------------------------------------------------------- |
    | 命名词典 | 各条目类型中定义的标准词汇列表，用于约束语义片段的用词，保证编号命名的一致性                  |
    | 管理表   | 用于维护各类条目编号映射、归属关系和状态跟踪的表格（如Excel），是编号登记和追溯关系维护的载体 |

# 附录B（资料性）关联规范

+   本规范与以下规范存在关联关系：
    -   上位规范：《软件研发过程规范》——本规范中各编号类型的生命周期阶段划分应与《软件研发过程规范》中定义的研发阶段保持一致
    -   平级规范：《C99-天帷通用术语规范》——本规范引用的通用术语统一在术语规范中定义
    -   平级规范：《P02-软件开发错误代码规范》——错误码采用专属编码体系（E-XXXBBSS），其中 BB 段的 BC 编码与本规范中 BC 短号的数字部分一致；BC 数量超过 99 个时，BB 段扩展为双字母编码(aa、ab、…、zz)，具体方案见错误代码规范
    -   平级规范：编码规范——编码规范约束代码层面的命名（变量名、函数名、类名等），本规范约束条目层面的编号，两者互不覆盖
    -   平级规范：文档管理规范——文档管理规范约束文档文件名，本规范约束文档内容中引用的条目编号
    -   平级规范：运维规范——运维规范约束运维环境、部署配置等基础设施层面的命名，本规范不涉及此范围

# 附录C（资料性）前提假设

+   本规范基于以下前提假设，使用时应确认项目环境与之匹配：
    -   项目采用"战略主题 (Strategic Theme) - 史诗 - 能力 - 特性 - 用户故事 - 验收标准"的需求层级体系（能力层级仅在跨限界上下文协作的大型项目中使用，小型项目可省略）
    -   项目采用领域驱动设计（DDD），以限界上下文 (Bounded Context, BC) 作为业务边界划分单元
    -   项目使用宏观需求分析中的三线演绎方法（活动线、实体线、角色线）
    -   项目需要在需求、设计、开发、测试之间建立端到端的追溯链
+   不采用上述方法论的项目，可裁剪本规范中不适用的条目类型，但已采用的条目类型应遵循本规范的编号规则。

# 附录D（资料性）追溯链全景

+   宏观需求层各条目通过追溯链形成完整的需求推导路径。各条目类型在链路中的位置如下：

    ```graph
    Theme（主题）
        │
        ▼
    业务目标（BG）
        │
        ▼
    困境（DLM）
        │
        ▼
    痛点（PP）/ 期望（EXP）  ◀──  利益相关方（SH）──▶ 系统角色（SROLE）──▶ 工作场景（WS）
        │                                                                       │
        ▼                                                                       ▼
    Epic（史诗）  ◀──验证──  业务环节（BS）、关键实体（EN）/ 生命周期（LC）/ 事件（EVT）
        │                                                    触点（TP）
        ▼
    Feature（特性）──▶ 详细需求层（§3.4）
    ```

+   追溯链说明
    +   **Theme → BG → DLM → PP/EXP → Epic**：从战略方向逐层细化到业务目标、系统性障碍、角色层面的痛点/期望，最终推导出Epic
    +   **SH → SROLE → WS → TP → US**：从利益相关方全集中识别系统角色，定义角色的工作场景和旅程触点，向下映射到用户故事
    +   **BS / EN+LC+EVT → Epic**：活动线和实体线用于验证Epic的完整性覆盖（所有业务环节和生命周期阶段应100%被Epic覆盖）
    +   **BAS → Epic**：业务验收场景定义Epic"完成"的端到端验收依据

+   各条目类型与追溯链的映射关系通过管理表（关联表）维护，不在语义ID中嵌入上下游条目的编号。

+   完整追溯示例

    以下以"用户密码登录"功能为例，展示从战略主题到子任务的完整追溯链。示例中以"关联""推导自"等标注简化展示追溯关系，实际项目中追溯关系通过管理表维护。

    ```text
    主题:
      THM001: 增长战略 (THM-growth)

    业务目标:
      BG-improve-conversion: 提升转化率
        关联: THM001

    困境:
      DLM-complex-registration: 注册登录流程复杂
        关联: BG-improve-conversion

    痛点与期望:
      PP-buyer-login-step-too-many: 买家登录步骤过多，体验差
        关联: DLM-complex-registration
      EXP-buyer-multiple-auth-method: 希望支持多种认证方式
        关联: DLM-complex-registration

    史诗:
      EPIC001: 用户认证体系 (EPIC-USER-auth)
        关联: THM001
        推导自: PP-buyer-login-step-too-many, EXP-buyer-multiple-auth-method

    特性:
      FT001: 密码认证 (FT-USER-password-auth)
        关联: EPIC001

    用户故事:
      US001: 密码登录 (US-USER-auth-login-password)
        关联: FT001

    验收标准:
      AC001: 有效输入验收 (AC-USER-login-input-valid)    关联: US001
      AC002: 无效输入验收 (AC-USER-login-input-invalid)  关联: US001
      AC003: 登录成功响应 (AC-USER-login-success-response) 关联: US001
      AC004: 账号锁定验收 (AC-USER-login-account-locked) 关联: US001

    业务规则:
      BR001: 密码复杂度规则 (BR-USER-password-complexity)
        引用自: AC001, AC002

    API:
      API001: 登录接口 (API-USER-auth-login)
        实现: US001    覆盖: AC001, AC002, AC004

    外部集成:
      INTG001: 微信OAuth令牌交换 (INTG-USER-wechat-oauth-token-exchange)
        关联: EPIC001

    测试用例:
      TC0001: 有效输入测试 (TC-USER-login-valid-input)       测试: AC001
      TC0002: 无效密码测试 (TC-USER-login-invalid-password)  测试: AC002

    缺陷:
      BUG0089: 登录页面崩溃 (BUG-USER-login-page-crash)     关联: API001

    任务:
      TASK001: 登录接口开发 (TASK-DEV-login-api-impl)        实现: US001
      TASK002: 登录页面开发 (TASK-DEV-login-page-ui)         实现: US001

    子任务:
      STASK001: 表结构设计 (STASK-login-api-db-schema-design)   关联: TASK001
      STASK002: 端点实现 (STASK-login-api-endpoint-impl)       关联: TASK001
      STASK003: 业务逻辑实现 (STASK-login-api-service-logic-impl) 关联: TASK001
    ```

# 附录E（资料性）标准缩写词典

+   本附录定义在编号体系中允许使用的标准缩写。缩写可用于语义ID和短号中。

+   缩写使用规则
    +   只有在多个场景中通用、大面积使用的术语，方可使用缩写
    +   仅在某个或少数几个场景中出现的术语，不应使用缩写，应使用完整拼写
    +   所有项目成员应优先使用本词典中已定义的标准缩写；新增缩写时应提交至本词典统一登记后方可使用
    +   同一术语在全项目范围内应使用统一的缩写形式

+   需求层级缩写

    | 全称                | 标准缩写 | 适用场景         |
    | ------------------- | -------- | ---------------- |
    | Theme               | THM      | 语义ID前缀、短号 |
    | Epic                | EPIC     | 语义ID前缀、短号 |
    | Feature             | FT       | 语义ID前缀、短号 |
    | User Story          | US       | 语义ID前缀、短号 |
    | Acceptance Criteria | AC       | 语义ID前缀、短号 |
    | Task                | TASK     | 语义ID前缀、短号 |
    | Sub-task            | STASK    | 语义ID前缀、短号 |

+   追溯链缩写

    | 全称          | 标准缩写 | 适用场景         |
    | ------------- | -------- | ---------------- |
    | Business Goal | BG       | 语义ID前缀、短号 |
    | Dilemma       | DLM      | 语义ID前缀、短号 |
    | Pain Point    | PP       | 语义ID前缀、短号 |
    | Expectation   | EXP      | 语义ID前缀、短号 |

+   分析方法缩写

    | 全称                         | 标准缩写 | 适用场景             |
    | ---------------------------- | -------- | -------------------- |
    | Business Segment             | BS       | 语义ID前缀、短号     |
    | Key Entity                   | EN       | 语义ID前缀、短号     |
    | Lifecycle                    | LC       | 语义ID嵌入标记、短号 |
    | Event                        | EVT      | 语义ID前缀、短号     |
    | Stakeholder                  | SH       | 语义ID前缀、短号     |
    | Work Scenario                | WS       | 语义ID前缀、短号     |
    | Touchpoint                   | TP       | 语义ID前缀、短号     |
    | Business Acceptance Scenario | BAS      | 语义ID前缀、短号     |

+   需求分类缩写

    | 全称                        | 标准缩写 | 适用场景         |
    | --------------------------- | -------- | ---------------- |
    | Foundation Requirements     | FR       | 语义ID前缀、短号 |
    | Non-Functional Requirements | NFR      | 语义ID前缀、短号 |

+   编码体系缩写

    | 全称               | 标准缩写 | 适用场景         |
    | ------------------ | -------- | ---------------- |
    | Capability         | CAP      | 语义ID前缀、短号 |
    | Enabler Capability | ECAP     | 语义ID前缀、短号 |
    | Domain             | DOM      | 语义ID前缀、短号 |
    | Bounded Context    | BC       | 语义ID片段、短号 |
    | Test Case          | TC       | 语义ID前缀、短号 |
    | Bug / Defect       | BUG      | 语义ID前缀、短号 |
    | Change Request     | CR       | 语义ID前缀、短号 |
    | Business Rule      | BR       | 语义ID前缀、短号 |
    | Data Entity        | DE       | 语义ID前缀、短号 |
    | Integration Point  | INTG     | 语义ID前缀、短号 |
    | System Role        | SROLE    | 语义ID前缀、短号 |
    | Business Role      | BROLE    | 语义ID前缀、短号 |

+   技术领域缩写

    | 全称                               | 标准缩写 | 适用场景         |
    | ---------------------------------- | -------- | ---------------- |
    | API                                | API      | 语义ID前缀、短号 |
    | Service                            | SVC      | 语义ID前缀、短号 |
    | Architecture Decision Record       | ADR      | 语义ID前缀、短号 |
    | Database                           | DB       | 语义ID片段       |
    | Architecture                       | ARCH     | 语义ID片段       |
    | User Interface                     | UI       | 语义ID片段       |
    | Application Performance Management | APM      | 语义ID前缀、短号 |

+   项目管理缩写

    | 全称 | 标准缩写 | 适用场景         |
    | ---- | -------- | ---------------- |
    | Risk | RISK     | 语义ID前缀、短号 |

+   自定义缩写
    +   当标准缩写词典不能满足项目需要时，可申请新增自定义缩写
    +   自定义缩写应满足以下条件：该术语在项目中跨多个模块或多个文档频繁使用；缩写具有足够的辨识度，不与已有缩写冲突；经项目组评审通过后登记至本词典
    +   不满足上述条件的术语，应使用完整拼写

# 附录F（资料性）编号类型速查表

+   本附录汇总所有编号类型，供快速检索。各类型的完整规则详见对应章节。

+   阶段1 产品战略（§3）

    | 类型前缀 | 条目类型 | 短号格式 | 详见章节 |
    | -------- | -------- | -------- | -------- |
    | THM      | 主题     | THM001   | §3.1     |
    | DOM      | 业务域   | DOM01    | §3.2     |

+   阶段2 宏观需求分析（§4）

    | 类型前缀 | 条目类型     | 短号格式                                | 详见章节 |
    | -------- | ------------ | --------------------------------------- | -------- |
    | EPIC     | 史诗         | EPIC001                                 | §4.1     |
    | SROLE    | 系统角色     | {类别缩写}{2~3位数字} 或 SROLE{3位数字} | §4.2     |
    | BROLE    | 业务角色     | BROLE{3位数字}                          | §4.3     |
    | BG       | 业务目标     | BG001                                   | §4.4     |
    | DLM      | 困境         | DLM001                                  | §4.5     |
    | PP       | 痛点         | PP001                                   | §4.6     |
    | EXP      | 期望         | EXP001                                  | §4.7     |
    | SH       | 利益相关方   | SH01                                    | §4.8     |
    | BS       | 业务环节     | BS001                                   | §4.9     |
    | EN       | 关键实体     | EN001                                   | §4.10    |
    | LC       | 生命周期阶段 | LC001                                   | §4.11    |
    | EVT      | 事件         | EVT001                                  | §4.12    |
    | WS       | 工作场景     | WS001                                   | §4.13    |
    | TP       | 关键旅程触点 | TP001                                   | §4.14    |
    | BAS      | 业务验收场景 | BAS001                                  | §4.15    |
    | FR       | 基础性需求   | FR01                                    | §4.16    |
    | NFR      | 非功能需求   | NFR001                                  | §4.17    |

+   阶段3 领域设计（§5）

    | 类型前缀 | 条目类型   | 短号格式 | 详见章节 |
    | -------- | ---------- | -------- | -------- |
    | BC       | 限界上下文 | BC01-    | §5.1     |

+   阶段4 系统设计（§6）

    | 类型前缀 | 条目类型        | 短号格式 | 详见章节 |
    | -------- | --------------- | -------- | -------- |
    | CAP      | 能力            | CAP001   | §6.1     |
    | ECAP     | 架构能力        | ECAP001  | §6.2     |
    | SVC      | 系统模块/微服务 | SVC001   | §6.3     |
    | ADR      | 架构决策记录    | ADR001   | §6.4     |
    | APM      | APM监控项       | APM001   | §6.5     |

+   阶段5 BC详细需求（§7）

    | 类型前缀 | 条目类型 | 短号格式 | 详见章节 |
    | -------- | -------- | -------- | -------- |
    | FT       | 特性     | FT001    | §7.1     |
    | US       | 用户故事 | US001    | §7.2     |
    | AC       | 验收标准 | AC001    | §7.3     |
    | BR       | 业务规则 | BR001    | §7.4     |

+   阶段6 BC总体设计（§8）

    | 类型前缀 | 条目类型 | 短号格式 | 详见章节 |
    | -------- | -------- | -------- | -------- |
    | DE       | 数据实体 | DE001    | §8.1     |

+   阶段7 BC详细设计（§9）

    | 类型前缀 | 条目类型     | 短号格式 | 详见章节 |
    | -------- | ------------ | -------- | -------- |
    | API      | API接口      | API001   | §9.1     |
    | INTG     | 外部集成接口 | INTG001  | §9.2     |

+   阶段8 开发实现（§10）

    | 类型前缀 | 条目类型 | 短号格式 | 详见章节 |
    | -------- | -------- | -------- | -------- |
    | TASK     | 任务     | TASK001  | §10.1    |
    | STASK    | 子任务   | STASK001 | §10.2    |
    | TC       | 测试用例 | TC0001   | §10.3    |
    | BUG      | 缺陷     | BUG0001  | §10.4    |
    | CR       | 变更请求 | CR001    | §10.5    |
    | RISK     | 风险     | RISK001  | §10.6    |

# 修订记录

| 标记 | 日期       | 修订内容                                                                            | 修订人 |
| ---- | ---------- | ----------------------------------------------------------------------------------- | ------ |
| 0.21 | 2026-02-23 | 全文逻辑重构：消除交叉重复，提取通用规则至§2.1统一管辖                              | 丁劲松 |
|      |            | §1删除强制执行声明和关联规范描述；删除DESIGN编号类型和数据库表命名节                |        |
|      |            | 缩写词典、速查表、追溯链全景、完整示例移至资料性附录                                |        |
|      |            | §2.1新增前缀冲突检测规则、语义ID大小写解析约定、技术域标识定义表（§3.3）            |        |
|      |            | 新增业务规则（BR）、数据实体（DE）、外部集成接口（INTG）三个条目类型                |        |
|      |            | 按研发过程规范8阶段重组为§3~§10，每章对应一个研发阶段，所有引用和速查表同步更新     |        |
| 0.20 | 2026-02-23 | 按C01/C02/M01规范全面改造；总则重写为适用范围                                       | 丁劲松 |
|      |            | 章节编号顺移（原0/1/2→1/2/3）；附录标题加性质标注                                   |        |
|      |            | 修订记录独立于附录编号体系并改用标准格式                                            |        |
|      |            | 删除重复表标题；删除术语规范具体章节编号引用；精简动机铺垫句                        |        |
| 0.11 | 2026-02-06 | 与《研发过程规范》V0.21一致性对齐，修正BC短号格式、订单域BC示例、通用规则例外条款等 | 丁劲松 |
| 0.10 | 2026-01-27 | 初始版本                                                                            | 丁劲松 |
