# 结构约束与章节拆分流程

## 结构约束

| 约束类型         | 来源        | 值                                       | 可否覆盖       |
| ---------------- | ----------- | ---------------------------------------- | -------------- |
| 单章容量上限     | 框架内置    | 1 万汉字（≈16K tokens，含标点/Markdown） | 用户指令可覆盖 |
| 标题层级深度上限 | 用户指定    | 无默认限制                               | 用户指令设定   |
| 总文档容量上限   | 用户指定    | 无默认限制（可分批处理）                 | 用户指令设定   |

超限时通过拆分章节或精炼压缩来满足，不可忽略约束。

**拆分 vs 压缩的选择：**
-   超限不足 20% 且存在可精炼冗余 → 优先压缩
-   超限幅度大或内容均为必要信息 → 必须拆分

## 章节拆分操作流程

1.   **检测**：每批编写/修订完成后，检查本批涉及章节的字数是否超出上限
2.   **评估拆分方案**：按内容逻辑的自然断点（主题转换、阶段分界、模块边界）确定拆分位置，优先拆为同级章节
3.   **执行拆分**：
-   拆分超限章节为两个或多个章节
-   调整后续章节编号
-   修正全文中所有指向受影响章节的交叉引用
-   更新文档目录（如有）
4.   **同步更新计划文件**：更新大纲/编写计划/修订计划中受影响的章节编号和描述
5.   **报告**：在批次报告中说明拆分操作、影响章节范围和已更新的交叉引用数量
