# 生成文档大纲

生成文档大纲。

## 适用场景

-   为新文档生成大纲
-   更新已有文档的大纲结构

## 输入

$ARGUMENTS

## 先决条件检查

**在执行任何步骤前，先完成以下检查：**

扫描当前会话历史中的 `[LOADED *]` 记录：
- 若会话历史中**无任何** `[LOADED *]` 记录 → 视为全新大纲，允许继续（用户输入驱动）
- 若存在 `[LOADED *]` 记录但**无** `[LOADED target]`、`[LOADED outline]`、`[LOADED upstream]` 任一 → 提示后继续

无需强制中止，但若用户已有文档想基于它生成大纲，应提示先执行 `/load-target`。

## 执行步骤

### 1. 确认输入来源

从会话历史扫描 `[LOADED *]` 记录，整理可用输入：
- 已有文档（`[LOADED target]`）：用于更新大纲结构
- 规范文档（`[LOADED spec]`、`[LOADED domain]`）：用于约束大纲结构
- 上游文档（`[LOADED upstream]`）：用于把握上下文和范围

读取 `projects/{项目}/decisions.md`（若能从已加载文件路径推断项目目录则读取，否则跳过）。

### 2. 执行大纲生成流程

按以下阶段执行：

-   阶段零：会话初始化（输入识别、内部准备、输入评估与确认）
-   阶段一：大纲生成（模板驱动或自主生成）
-   大纲输出与确认

### 3. 输出

大纲文件写入 `projects/{项目}/plans/大纲_{目标文档名}.md`

## 不执行

-   **不自动加载**规范文档或关联文档（由用户通过 /load-* 自行决定）
-   **不执行**容量评估（大纲生成本身不涉及大量输出）
